# Terminal ガラス効果 — ユーザーガイド

> **ステータス**: beta (v1.9.9〜)
> **対応OS**: macOS のみ
> **対象アプリ**: Terminal.app

---

## ガラス効果とは

Terminal.app のウィンドウ背景を **半透明** にする機能です。
デスクトップの壁紙や背後のウィンドウが透けて見えるようになり、複数ターミナルを並べたときの視認性・デザイン性が向上します。

---

## 基本操作

### 全体（バッチ）操作

ナビバーのカラーメニュー（🎨アイコン）を開くと、下部に **ガラス ON/OFF** ボタンがあります。

| 操作 | 説明 |
|------|------|
| **ガラス ON** | 全ターミナルウィンドウを半透明化 |
| **ガラス OFF** | 全ターミナルウィンドウの透明を解除し、元の色に復元 |
| **リセット** | ガラスを解除し、デフォルト色（黒背景・白テキスト）に戻す |

### カード単位の操作

カードを開いて（編集モーダル）、Terminal 背景色セクションに **ガラス** ボタンがあります。
そのカードに紐づくターミナルウィンドウだけにガラス効果を適用/解除できます。

---

## カラー連動

ガラス効果は色設定と組み合わせて使えます。

### ガラスON中に色を変更

ガラスがONの状態で以下の色操作を行うと、**半透明 + 色つき** で反映されます。

- **カラム色**: カラムごとに異なる半透明色
- **優先順位色**: タスクの優先度に応じた半透明色
- **プリセット**: テーマカラーの半透明版
- **グラデーション**: 各ウィンドウに個別の半透明グラデーション
- **カスタムカラー**: カラーピッカーで選んだ色の半透明版

### 色設定済み → ガラスON

先に色を設定してからガラスをONにすると、**各ウィンドウの現在色を保持したまま半透明化** されます。
例: カラム色を適用済み → ガラスON → 各カラムの色がそのまま透けて見える。

### ガラスOFF時の色復元

ガラスをOFFにすると、ガラスON **前の元の色** に戻ります。
リセットボタンを押した場合は、デフォルトの黒背景に戻ります。

---

## 操作フロー例

### 例1: シンプルなガラス効果

1. カラーメニューを開く
2. 「ガラス ON」をクリック
3. 全ターミナルが半透明になる
4. 元に戻したい → 「ガラス OFF」

### 例2: カラム色 + ガラス

1. カラーメニューから「カラム色」を適用
2. 各カラムのターミナルに色がつく
3. 「ガラス ON」をクリック
4. 各カラム色が半透明になる
5. 「ガラス OFF」→ 元の不透明カラム色に戻る

### 例3: ガラスON中にグラデーション

1. 「ガラス ON」をクリック
2. 「グラデーション」をクリック
3. 各ターミナルが個別の半透明グラデーション色になる

### 例4: カード単位で操作

1. カードを開く（編集モーダル）
2. Terminal 背景色セクションの「ガラス」ボタンをクリック
3. そのカードのターミナルだけ半透明になる
4. 「カラム色」や「カスタムカラー」ボタンを押すと、半透明+色つきに

---

## 制限事項・注意点

| 項目 | 説明 |
|------|------|
| **macOS限定** | Terminal.appのプロファイル機能を利用するため、macOSでのみ動作 |
| **初回遅延** | 初めてガラスを使う際、Swiftバイナリのコンパイルに数秒かかる場合がある |
| **色数による遅延** | 多くの異なる色を半透明にする場合（グラデーション等）、プロファイル生成に時間がかかることがある |
| **白背景の自動変換** | Terminal.appの「Basic」等の白背景プロファイルは、自動的にダーク色に変換される |
| **プロファイル残留** | ガラス用プロファイル（`atelierx-glass-*`）がTerminal.appの設定に残ることがある。手動削除は Terminal > 設定 > プロファイル から可能 |

---

## トラブルシューティング

### ガラスが効かない
- Terminal.appが起動しているか確認
- AtelierXを再起動して、Swiftバイナリの再コンパイルを試す

### 色が戻らない
- リセットボタン（🔄アイコン）を押してデフォルト色に戻す
- それでも戻らない場合、Terminal.appの設定 > プロファイルからウィンドウのプロファイルを手動変更

### 全ウィンドウが同じ色になる
- v1.9.9 で修正済み。アプリを最新版にアップデートしてください

---

*最終更新: 2026-02-15 / v1.9.9*
