# Known Issues

## Issue #1: ウィンドウジャンプ後にElectronアプリが最前面に来る

### 概要
Terminal/Finderの「開く」ボタンをクリックすると、対象ウィンドウがポップ（最小化→復元）するが、最後にElectronアプリ（Terminal Board）が最前面に来てしまう。

### 期待する動作
対象のTerminal/Finderウィンドウだけが最前面に表示され、Electronアプリは後ろに留まる。

### 現状
- 対象ウィンドウは正しく最小化→復元される
- しかし、処理完了後にElectronアプリがフォーカスを取り戻す

### 試したアプローチ
1. `activate`を使わずに`AXRaise`のみ使用 → 効果なし
2. Electronウィンドウを`blur()` → アプリも後ろに行ってしまう
3. `spawn`で完全に切り離されたプロセスとして実行 → 効果なし
4. `await`せずにfire-and-forget → 効果なし
5. System Eventsで`click window 1` → 効果なし

### 技術的な課題
macOSのウィンドウ管理の仕様上、IPC通信が完了するとElectronアプリがフォーカスを取り戻す傾向がある。

### 優先度
Medium

### ステータス
Open

---

## Issue #2: Finderウィンドウのポップ動作が遅い

### 概要
Finderの「開く」ボタンをクリックすると、対象ウィンドウがポップするが、Terminalに比べて反応が遅い。

### 期待する動作
Terminalと同程度の速度でポップ動作が完了する。

### 現状
- 動作自体は正常（最小化→復元）
- しかし、反応に遅延がある（体感0.5〜1秒程度）

### 技術的な背景
- TerminalはAppleScriptの`miniaturized`プロパティをサポート
- Finderは`miniaturized`をサポートせず、`collapsed`プロパティを使用
- `collapsed`プロパティの動作がTerminalより遅い可能性

### 試したアプローチ
1. `collapsed`プロパティで最小化→復元 → 動作するが遅い
2. `Cmd+M`キーストロークで最小化 → 全ウィンドウが復元される問題
3. 遅延を0.15秒に短縮 → 多少改善

### 優先度
Low

### ステータス
Open

---

## Issue #3: Obsidianデイリーノートへの差し込みが動作しない

### 概要
エクスポートモーダルから「Obsidianに差し込み」ボタンをクリックしても、デイリーノートにコンテンツが差し込まれない。

### 期待する動作
設定で指定したVaultパスとデイリーノートパスに基づき、マーカー位置にログ内容が差し込まれる。

### 現状
調査中

### 優先度
High

### ステータス
Investigating

---

## Issue #30: アクセシビリティ権限のOFF→ON切替では権限がリフレッシュされない

### 概要
macOS のアクセシビリティ権限で AtelierX のトグルを OFF → ON に切り替えるだけでは、権限が正しくリフレッシュされないことがある。

### 対処法
アクセシビリティの一覧から AtelierX を「−」ボタンで削除し、「+」ボタンで再追加する必要がある。アプリ更新時にも同じ手順が必要になる場合がある。

### ステータス
Documented (README に手順を記載済み)

---

## Issue #32: ステージマネージャー有効時に Grid 配置が正しく動作しない

### 概要
macOS のステージマネージャーが有効な場合、ウィンドウの位置・サイズが macOS 側で自動調整されるため、Grid 配置が意図通りに動作しない。

### 対処法
Grid 配置を使用する際はステージマネージャーをオフにする。AtelierX は Grid 配置実行時にステージマネージャーの状態を検知し、有効な場合は警告を表示する。

### ステータス
Fixed (検知+警告を実装済み)
