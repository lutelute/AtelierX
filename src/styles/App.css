* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
  min-height: 100vh;
  color: #e4e4e7;
}

/* Development Mode Indicator */
.dev-mode-indicator {
  position: fixed;
  top: 8px;
  right: 12px;
  background: #f97316;
  color: #fff;
  font-size: 10px;
  font-weight: 700;
  padding: 4px 8px;
  border-radius: 4px;
  z-index: 9999;
  letter-spacing: 0.5px;
  -webkit-app-region: no-drag;
}

.app-dev-mode .drag-region {
  background: linear-gradient(90deg, transparent 0%, rgba(249, 115, 22, 0.15) 50%, transparent 100%);
}

.board-container {
  min-height: 100vh;
  padding: 24px;
  padding-top: 72px;
  padding-left: 72px;
}

/* ============================================
   左サイドメニュー
   ============================================ */
.sidebar {
  position: fixed;
  top: 0;
  left: 0;
  bottom: 0;
  width: 56px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  padding: 72px 0 20px;
  z-index: 998;
}

.sidebar-top,
.sidebar-bottom {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}

.sidebar-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  background: transparent;
  border: none;
  border-radius: 12px;
  color: rgba(255, 255, 255, 0.35);
  font-size: 18px;
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.sidebar-btn:hover {
  color: rgba(255, 255, 255, 0.7);
  background: rgba(255, 255, 255, 0.06);
}

.sidebar-btn.active {
  color: #a78bfa;
  background: rgba(167, 139, 250, 0.12);
}

.sidebar-icon {
  font-size: 18px;
}

.sidebar-icon-svg {
  display: block;
  opacity: 0.7;
}

/* ============================================
   フローティングナビゲーションバー
   ============================================ */
.floating-nav {
  position: fixed;
  top: 12px;
  left: 50%;
  transform: translateX(-50%);
  height: 48px;
  display: flex;
  align-items: center;
  gap: 0;
  padding: 6px;
  background: rgba(20, 20, 30, 0.96);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 16px;
  box-shadow:
    0 4px 24px rgba(0, 0, 0, 0.4),
    0 0 0 1px rgba(255, 255, 255, 0.03) inset;
  z-index: 1000;
  -webkit-app-region: no-drag;
}

.nav-section {
  display: flex;
  align-items: center;
  height: 100%;
}

.nav-left {
  padding: 0 8px;
}

.nav-center {
  padding: 0 4px;
}

.nav-right {
  padding: 0 4px;
  gap: 2px;
}

/* ブランド */
.nav-brand {
  display: flex;
  align-items: center;
  padding: 0 4px;
}

.brand-name {
  font-size: 14px;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.85);
  letter-spacing: 0.5px;
}

/* ナビゲーションタブ */
.nav-tabs-wrapper {
  position: relative;
  display: flex;
  align-items: center;
  max-width: 60vw;
}

.nav-tabs-fade {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 28px;
  pointer-events: none;
  z-index: 2;
}

.nav-tabs-fade-left {
  left: 0;
  background: linear-gradient(to right, rgba(30, 30, 46, 0.95), transparent);
  border-radius: 12px 0 0 12px;
}

.nav-tabs-fade-right {
  right: 0;
  background: linear-gradient(to left, rgba(30, 30, 46, 0.95), transparent);
  border-radius: 0 12px 12px 0;
}

.theme-light .nav-tabs-fade-left {
  background: linear-gradient(to right, rgba(245, 245, 250, 0.95), transparent);
}

.theme-light .nav-tabs-fade-right {
  background: linear-gradient(to left, rgba(245, 245, 250, 0.95), transparent);
}

.nav-tabs {
  display: flex;
  gap: 4px;
  padding: 4px;
  background: rgba(255, 255, 255, 0.04);
  border-radius: 12px;
  overflow-x: auto;
  overflow-y: hidden;
  max-width: 60vw;
  scrollbar-width: none; /* Firefox */
}

.nav-tabs::-webkit-scrollbar {
  display: none;
}

.nav-tab {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  background: transparent;
  border: none;
  border-radius: 10px;
  color: rgba(255, 255, 255, 0.5);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.15s ease, color 0.15s ease;
  white-space: nowrap;
  flex-shrink: 0;
}

.nav-tab:hover {
  color: rgba(255, 255, 255, 0.8);
  background: rgba(255, 255, 255, 0.06);
}

.nav-tab.active {
  color: #fff;
  background: rgba(255, 255, 255, 0.1);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

/* 動的タブ: borderColor がinline styleで設定される */

.tab-icon {
  font-size: 14px;
  opacity: 0.8;
}

.tab-label {
  letter-spacing: 0.3px;
}

/* アクションボタン */
.nav-action {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  background: transparent;
  border: none;
  border-radius: 10px;
  color: rgba(255, 255, 255, 0.45);
  font-size: 15px;
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
}

.nav-action:hover {
  color: rgba(255, 255, 255, 0.9);
  background: rgba(255, 255, 255, 0.08);
}

.nav-action:active {
  transform: scale(0.92);
}

.nav-action-term-color {
  color: rgba(139, 92, 246, 0.55);
}

.nav-action-term-color:hover,
.nav-action-term-color.active {
  color: rgba(139, 92, 246, 0.95);
  background: rgba(139, 92, 246, 0.12);
}

/* Terminal色ドロップダウン */
.color-menu-wrapper {
  position: relative;
}

.color-menu-dropdown {
  position: absolute;
  top: calc(100% + 4px);
  right: 0;
  width: 180px;
  background: rgba(30, 30, 36, 0.98);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 10px;
  padding: 4px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
  z-index: 100;
  animation: color-menu-in 0.12s ease-out;
}

@keyframes color-menu-in {
  from { opacity: 0; transform: translateY(-4px) scale(0.96); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}

.color-menu-item {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 7px 10px;
  border: none;
  border-radius: 7px;
  background: none;
  color: rgba(255, 255, 255, 0.75);
  font-size: 12px;
  cursor: pointer;
  transition: background 0.1s, color 0.1s;
}

.color-menu-item:hover {
  background: rgba(139, 92, 246, 0.15);
  color: rgba(255, 255, 255, 0.95);
}

.color-menu-item.color-menu-reset {
  color: rgba(161, 161, 170, 0.65);
}

.color-menu-item.color-menu-reset:hover {
  background: rgba(161, 161, 170, 0.12);
  color: rgba(161, 161, 170, 0.95);
}

.color-menu-divider {
  height: 1px;
  background: rgba(255, 255, 255, 0.08);
  margin: 3px 6px;
}
.color-menu-label {
  padding: 4px 10px 2px;
  font-size: 10px;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.35);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}
.color-menu-presets {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 4px;
  padding: 4px 4px 6px;
}
.color-preset-chip {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 3px 8px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  background: rgba(255, 255, 255, 0.04);
  color: rgba(255, 255, 255, 0.7);
  font-size: 11px;
  cursor: pointer;
  transition: all 0.12s;
  white-space: nowrap;
}
.color-preset-chip:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(255, 255, 255, 0.2);
  color: #fff;
}
.color-preset-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

.nav-action.pulse {
  animation: pulse-glow 2s infinite;
}

@keyframes pulse-glow {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(74, 222, 128, 0.4);
  }
  50% {
    box-shadow: 0 0 0 6px rgba(74, 222, 128, 0);
  }
}

.action-icon {
  font-size: 15px;
}

.action-badge {
  font-size: 11px;
  font-weight: 700;
  color: #4ade80;
  background: rgba(74, 222, 128, 0.15);
  padding: 4px 8px;
  border-radius: 8px;
}

.nav-divider {
  width: 1px;
  height: 20px;
  background: rgba(255, 255, 255, 0.1);
  margin: 0 6px;
}

/* テーマスライダー */
.theme-slider {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 10px;
  background: rgba(255, 255, 255, 0.06);
  border-radius: 20px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.theme-slider:hover {
  background: rgba(255, 255, 255, 0.1);
}

.theme-label {
  font-size: 12px;
  opacity: 0.4;
  transition: opacity 0.3s ease;
}

.theme-label.light {
  opacity: 0.9;
  color: #fbbf24;
}

.theme-label.dark {
  opacity: 0.4;
}

.theme-light .theme-label.light {
  opacity: 0.4;
}

.theme-light .theme-label.dark {
  opacity: 0.9;
  color: #6366f1;
}

.theme-track {
  width: 28px;
  height: 16px;
  background: rgba(255, 255, 255, 0.15);
  border-radius: 8px;
  position: relative;
  transition: background 0.3s ease;
}

.theme-thumb {
  position: absolute;
  width: 12px;
  height: 12px;
  background: #fff;
  border-radius: 50%;
  top: 2px;
  left: 2px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  transform: translateX(12px);
}

.theme-light .theme-track {
  background: rgba(99, 102, 241, 0.3);
}

.theme-light .theme-thumb {
  transform: translateX(0);
}

/* ドラッグ領域 - ナビバーの左右と上部 */
.drag-region {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 60px;
  -webkit-app-region: drag;
  z-index: 998;
}

/* Export Button */
.export-btn {
  padding: 8px 16px;
  background: rgba(251, 191, 36, 0.15);
  border: 1px solid rgba(251, 191, 36, 0.3);
  border-radius: 8px;
  color: #fbbf24;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.export-btn:hover {
  background: rgba(251, 191, 36, 0.25);
  border-color: rgba(251, 191, 36, 0.5);
}

.grid-btn {
  padding: 8px 16px;
  background: rgba(139, 92, 246, 0.15);
  border: 1px solid rgba(139, 92, 246, 0.3);
  border-radius: 8px;
  color: #a78bfa;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.grid-btn:hover {
  background: rgba(139, 92, 246, 0.25);
  border-color: rgba(139, 92, 246, 0.5);
}

.board {
  display: flex;
  gap: 20px;
  overflow-x: auto;
  padding-bottom: 20px;
  will-change: scroll-position;
  position: relative;
}

/* Column Styles */
.column {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 12px;
  min-width: 320px;
  max-width: 320px;
  display: flex;
  flex-direction: column;
  max-height: calc(100vh - 120px);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.column-over {
  background: rgba(255, 255, 255, 0.08);
  border-color: rgba(99, 102, 241, 0.5);
}

/* Column Status Colors */
.column-todo .column-header {
  border-bottom-color: rgba(156, 163, 175, 0.5);
}
.column-todo .column-title {
  color: #9ca3af;
}
.column-todo .column-count {
  background: rgba(156, 163, 175, 0.2);
  color: #9ca3af;
}

.column-in-progress .column-header {
  border-bottom-color: rgba(59, 130, 246, 0.5);
}
.column-in-progress .column-title {
  color: #3b82f6;
}
.column-in-progress .column-count {
  background: rgba(59, 130, 246, 0.2);
  color: #3b82f6;
}
/* カード個別の進行中パルス（カラム単位ではなくカード単位で適用） */
.card.card-in-progress {
  border-left: 4px solid rgba(59, 130, 246, 0.6);
  animation: card-pulse-border 1.8s ease-in-out infinite;
}
@keyframes card-pulse-border {
  0%, 100% {
    border-left-color: rgba(59, 130, 246, 0.4);
    box-shadow: -2px 0 6px rgba(59, 130, 246, 0);
  }
  50% {
    border-left-color: rgba(59, 130, 246, 1);
    box-shadow: -3px 0 14px rgba(59, 130, 246, 0.45);
  }
}

.column-done .column-header {
  border-bottom-color: rgba(34, 197, 94, 0.5);
}
.column-done .column-title {
  color: #22c55e;
}
.column-done .column-count {
  background: rgba(34, 197, 94, 0.2);
  color: #22c55e;
}

.column-header {
  padding: 16px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.column-title {
  font-size: 14px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: #a1a1aa;
}

.column-count {
  background: rgba(255, 255, 255, 0.1);
  padding: 2px 10px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 600;
  color: #a1a1aa;
}

.column-content {
  flex: 1;
  overflow-y: auto;
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  min-height: 100px;
  will-change: scroll-position;
}

/* Card Styles */
.card {
  background: rgba(255, 255, 255, 0.08);
  border-radius: 10px;
  padding: 14px;
  cursor: grab;
  transition: background 0.15s ease, border-color 0.15s ease, box-shadow 0.15s ease;
  border: 1px solid rgba(255, 255, 255, 0.08);
  contain: content;
}

/* Card Column Color - left border via inline style */
.card.card-column-colored {
  border-radius: 0 10px 10px 0;
}

/* Priority high indicator */
.card.card-priority-high .card-title::before {
  content: '';
  display: inline-block;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: #ef4444;
  margin-right: 6px;
  vertical-align: middle;
}

.card:hover {
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.15);
  transform: translateY(-2px);
}

.card:active {
  cursor: grabbing;
}

.card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.card-tag {
  font-size: 11px;
  font-weight: 600;
  padding: 4px 10px;
  border-radius: 6px;
  color: #fff;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.card-actions {
  display: flex;
  gap: 4px;
}

.card-edit,
.card-delete {
  background: none;
  border: none;
  color: #71717a;
  cursor: pointer;
  font-size: 18px;
  line-height: 1;
  padding: 4px;
  border-radius: 4px;
  transition: all 0.15s ease;
}

.card-edit:hover {
  color: #a78bfa;
  background: rgba(167, 139, 250, 0.1);
}

.card-delete:hover {
  color: #ef4444;
  background: rgba(239, 68, 68, 0.1);
}

.card-title {
  font-size: 14px;
  font-weight: 500;
  color: #f4f4f5;
  margin-bottom: 6px;
  line-height: 1.4;
}

.card-description {
  font-size: 12px;
  color: #a1a1aa;
  line-height: 1.5;
}

.card-comment {
  font-size: 12px;
  color: #71717a;
  line-height: 1.4;
  margin-top: 8px;
  padding-top: 8px;
  border-top: 1px dashed rgba(255, 255, 255, 0.1);
}

.card-comment p {
  margin: 4px 0;
}

.card-comment p:first-child {
  margin-top: 0;
}

.card-comment ul,
.card-comment ol {
  margin: 4px 0;
  padding-left: 18px;
}

.card-comment code {
  background: rgba(0, 0, 0, 0.3);
  padding: 1px 4px;
  border-radius: 3px;
  font-family: 'SF Mono', Monaco, Consolas, monospace;
  font-size: 11px;
}

.card-comment strong {
  color: #a1a1aa;
}

.card-jump-button {
  display: block;
  width: 100%;
  margin-top: 10px;
  padding: 8px 12px;
  background: rgba(34, 197, 94, 0.15);
  border: 1px solid rgba(34, 197, 94, 0.3);
  border-radius: 6px;
  color: #22c55e;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.card-jump-button:hover {
  background: rgba(34, 197, 94, 0.25);
  border-color: rgba(34, 197, 94, 0.5);
}

.jump-button-id {
  opacity: 0.7;
  font-size: 10px;
  font-family: 'SF Mono', Monaco, Consolas, monospace;
}

/* Card Window Actions */
.card-window-actions {
  display: flex;
  gap: 6px;
  margin-top: 10px;
}

.card-window-actions .card-jump-button {
  flex: 1;
  margin-top: 0;
}

.card-unlink-button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: auto;
  padding: 8px;
  background: rgba(234, 179, 8, 0.15);
  border: 1px solid rgba(234, 179, 8, 0.3);
  border-radius: 6px;
  color: rgba(234, 179, 8, 0.9);
  font-size: 12px;
  cursor: pointer;
  flex-shrink: 0;
  transition: all 0.15s ease;
}

.card-unlink-button:hover {
  background: rgba(234, 179, 8, 0.3);
  border-color: rgba(234, 179, 8, 0.5);
}

.card-close-window-button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: auto;
  padding: 8px;
  background: rgba(239, 68, 68, 0.15);
  border: 1px solid rgba(239, 68, 68, 0.3);
  border-radius: 6px;
  color: #ef4444;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.card-close-window-button:hover {
  background: rgba(239, 68, 68, 0.25);
  border-color: rgba(239, 68, 68, 0.5);
}

/* Terminal Color Dot (shared) */
.terminal-color-dot {
  display: inline-block;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  border: 1px solid rgba(255, 255, 255, 0.2);
  flex-shrink: 0;
}

/* Column Actions */
.column-actions {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 12px;
}

.add-card-button,
.add-window-button {
  padding: 12px;
  background: transparent;
  border: 2px dashed rgba(255, 255, 255, 0.15);
  border-radius: 8px;
  color: #71717a;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.add-card-button:hover {
  border-color: rgba(99, 102, 241, 0.5);
  color: #a78bfa;
  background: rgba(99, 102, 241, 0.05);
}

.add-window-button:hover {
  border-color: rgba(34, 197, 94, 0.5);
  color: #22c55e;
  background: rgba(34, 197, 94, 0.05);
}

/* Modal Styles */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100;
}

.modal {
  background: #1e1e2e;
  border-radius: 16px;
  width: 100%;
  max-width: 440px;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px 24px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.modal-header h2 {
  font-size: 18px;
  font-weight: 600;
  color: #fff;
}

.modal-close {
  background: none;
  border: none;
  color: #71717a;
  cursor: pointer;
  font-size: 24px;
  line-height: 1;
  padding: 4px;
  border-radius: 6px;
  transition: all 0.15s ease;
}

.modal-close:hover {
  color: #fff;
  background: rgba(255, 255, 255, 0.1);
}

.modal form {
  padding: 24px;
  overflow-y: auto;
  flex: 1;
  min-height: 0;
}

.form-group {
  margin-bottom: 20px;
}

.form-group label {
  display: block;
  font-size: 13px;
  font-weight: 500;
  color: #a1a1aa;
  margin-bottom: 8px;
}

.form-group input,
.form-group textarea {
  width: 100%;
  padding: 12px 14px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  color: #fff;
  font-size: 14px;
  transition: all 0.15s ease;
}

.form-group input:focus,
.form-group textarea:focus {
  outline: none;
  border-color: rgba(99, 102, 241, 0.5);
  background: rgba(255, 255, 255, 0.08);
}

.form-group input::placeholder,
.form-group textarea::placeholder {
  color: #52525b;
}

.form-group textarea {
  resize: vertical;
  min-height: 100px;
  max-height: 50vh;
}

.tag-selector {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.tag-option {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 14px;
  background: rgba(255, 255, 255, 0.05);
  border: 2px solid transparent;
  border-radius: 8px;
  color: #a1a1aa;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.tag-option:hover {
  background: rgba(255, 255, 255, 0.08);
}

.tag-option.selected {
  color: #fff;
}

.tag-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
}

/* Tag option wrapper for edit button */
.tag-option-wrapper {
  display: flex;
  align-items: center;
  gap: 2px;
}

.tag-edit-btn {
  padding: 4px 6px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 4px;
  color: #71717a;
  font-size: 11px;
  cursor: pointer;
  transition: all 0.15s ease;
  opacity: 0;
}

.tag-option-wrapper:hover .tag-edit-btn {
  opacity: 1;
}

.tag-edit-btn:hover {
  background: rgba(99, 102, 241, 0.2);
  border-color: rgba(99, 102, 241, 0.4);
  color: #a78bfa;
}

/* Tag option edit mode */
.tag-option-edit {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  background: rgba(99, 102, 241, 0.1);
  border: 1px solid rgba(99, 102, 241, 0.3);
  border-radius: 8px;
  flex-wrap: wrap;
}

.subtag-edit-input {
  width: 80px;
  padding: 4px 8px;
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 4px;
  color: #fff;
  font-size: 12px;
}

.subtag-edit-input:focus {
  outline: none;
  border-color: rgba(99, 102, 241, 0.5);
}

.color-picker-mini {
  display: flex;
  gap: 3px;
}

.color-option-mini {
  width: 16px;
  height: 16px;
  border-radius: 3px;
  border: 2px solid transparent;
  cursor: pointer;
  transition: all 0.1s ease;
}

.color-option-mini:hover {
  transform: scale(1.1);
}

.color-option-mini.selected {
  border-color: #fff;
}

.btn-edit-done {
  padding: 3px 8px;
  background: rgba(34, 197, 94, 0.2);
  border: 1px solid rgba(34, 197, 94, 0.4);
  border-radius: 4px;
  color: #22c55e;
  font-size: 11px;
  cursor: pointer;
}

.btn-edit-done:hover {
  background: rgba(34, 197, 94, 0.3);
}

.btn-edit-delete {
  padding: 3px 8px;
  background: rgba(239, 68, 68, 0.2);
  border: 1px solid rgba(239, 68, 68, 0.4);
  border-radius: 4px;
  color: #ef4444;
  font-size: 11px;
  cursor: pointer;
}

.btn-edit-delete:hover {
  background: rgba(239, 68, 68, 0.3);
}

.form-actions {
  display: flex;
  justify-content: flex-end;
  gap: 12px;
  padding: 16px 24px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  background: #1e1e2e;
  border-radius: 0 0 16px 16px;
  flex-shrink: 0;
  flex-wrap: nowrap;
}

.form-actions button {
  white-space: nowrap;
  flex-shrink: 0;
}

.btn-secondary {
  padding: 10px 20px;
  background: transparent;
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 8px;
  color: #a1a1aa;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.btn-secondary:hover {
  background: rgba(255, 255, 255, 0.05);
  color: #fff;
}

.btn-primary {
  padding: 10px 24px;
  background: #6366f1;
  border: none;
  border-radius: 8px;
  color: #fff;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.btn-primary:hover:not(:disabled) {
  background: #4f46e5;
}

.btn-primary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.btn-send-to-ideas {
  padding: 10px 16px;
  background: rgba(249, 115, 22, 0.15);
  border: 1px solid rgba(249, 115, 22, 0.3);
  border-radius: 8px;
  color: #f97316;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.btn-send-to-ideas:hover {
  background: rgba(249, 115, 22, 0.25);
  border-color: rgba(249, 115, 22, 0.5);
}

.theme-light .btn-send-to-ideas {
  background: rgba(234, 88, 12, 0.1);
  border-color: rgba(234, 88, 12, 0.25);
  color: #ea580c;
}

.theme-light .btn-send-to-ideas:hover {
  background: rgba(234, 88, 12, 0.2);
  border-color: rgba(234, 88, 12, 0.4);
}

.btn-jump {
  width: 100%;
  padding: 12px;
  background: rgba(34, 197, 94, 0.1);
  border: 1px solid rgba(34, 197, 94, 0.3);
  border-radius: 8px;
  color: #22c55e;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.btn-jump:hover {
  background: rgba(34, 197, 94, 0.2);
  border-color: rgba(34, 197, 94, 0.5);
}

/* Terminal Color Actions in Edit Modal */
.terminal-color-section {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.terminal-color-presets {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.terminal-color-custom {
  display: flex;
  align-items: center;
  gap: 8px;
}

.terminal-color-action-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 7px 12px;
  background: rgba(139, 92, 246, 0.1);
  border: 1px solid rgba(139, 92, 246, 0.25);
  border-radius: 6px;
  color: #c4b5fd;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.terminal-color-action-btn:hover {
  background: rgba(139, 92, 246, 0.2);
  border-color: rgba(139, 92, 246, 0.4);
}

.terminal-color-reset-btn {
  background: rgba(255, 255, 255, 0.04);
  border-color: rgba(255, 255, 255, 0.1);
  color: #a1a1aa;
}

.terminal-color-reset-btn:hover {
  background: rgba(255, 255, 255, 0.08);
  border-color: rgba(255, 255, 255, 0.2);
}

.terminal-color-picker-input {
  width: 28px;
  height: 28px;
  padding: 0;
  border: none;
  border-radius: 6px;
  background: none;
  cursor: pointer;
  -webkit-appearance: none;
  appearance: none;
}

.terminal-color-picker-input::-webkit-color-swatch-wrapper {
  padding: 1px;
}

.terminal-color-picker-input::-webkit-color-swatch {
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 4px;
}

.terminal-color-picker-text {
  color: #a1a1aa;
  font-size: 11px;
}

/* Edit Modal */
.edit-modal {
  max-width: 500px;
}

/* Window Select Modal Styles */
.window-select-modal {
  max-height: 80vh;
  display: flex;
  flex-direction: column;
}

.window-list {
  padding: 16px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.window-empty {
  text-align: center;
  padding: 40px 20px;
  color: #71717a;
  font-size: 14px;
}

.window-item {
  display: flex;
  flex-direction: column;
  gap: 6px;
  width: 100%;
  text-align: left;
  padding: 14px 16px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.window-item:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(255, 255, 255, 0.2);
}

.window-item-terminal:hover {
  background: rgba(34, 197, 94, 0.1);
  border-color: rgba(34, 197, 94, 0.3);
}

.window-item-finder:hover {
  background: rgba(59, 130, 246, 0.1);
  border-color: rgba(59, 130, 246, 0.3);
}

.window-app-badge {
  padding: 3px 8px;
  border-radius: 4px;
  font-size: 11px;
  font-weight: 600;
  width: fit-content;
}

.window-app-terminal {
  background: rgba(34, 197, 94, 0.2);
  color: #22c55e;
}

.window-app-finder {
  background: rgba(59, 130, 246, 0.2);
  color: #3b82f6;
}

.window-name {
  color: #f4f4f5;
  font-size: 14px;
  font-weight: 500;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.window-path {
  color: #71717a;
  font-size: 12px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Window Open New Section */
.window-open-new-section {
  padding: 12px 16px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.btn-open-new {
  width: 100%;
  padding: 12px 16px;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
  border: 1px solid;
}

.btn-open-new:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.btn-open-new-terminal {
  background: rgba(34, 197, 94, 0.15);
  border-color: rgba(34, 197, 94, 0.3);
  color: #22c55e;
}

.btn-open-new-terminal:hover:not(:disabled) {
  background: rgba(34, 197, 94, 0.25);
  border-color: rgba(34, 197, 94, 0.5);
}

.btn-open-new-finder {
  background: rgba(59, 130, 246, 0.15);
  border-color: rgba(59, 130, 246, 0.3);
  color: #3b82f6;
}

.btn-open-new-finder:hover:not(:disabled) {
  background: rgba(59, 130, 246, 0.25);
  border-color: rgba(59, 130, 246, 0.5);
}

/* Terminal New Button in Add Card Modal */
.btn-terminal-new {
  padding: 10px 16px;
  background: rgba(34, 197, 94, 0.15);
  border: 1px solid rgba(34, 197, 94, 0.3);
  border-radius: 8px;
  color: #22c55e;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.btn-terminal-new:hover:not(:disabled) {
  background: rgba(34, 197, 94, 0.25);
  border-color: rgba(34, 197, 94, 0.5);
}

.btn-terminal-new:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* Window Link Section in Edit Modal */
.linked-window-info {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
}

.linked-window-name {
  flex: 1;
  color: #f4f4f5;
  font-size: 14px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.linked-window-id {
  font-size: 11px;
  color: #71717a;
  font-family: 'SF Mono', Monaco, Consolas, monospace;
}

.btn-unlink {
  padding: 4px 8px;
  background: rgba(239, 68, 68, 0.2);
  border: none;
  border-radius: 4px;
  color: #ef4444;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.btn-unlink:hover {
  background: rgba(239, 68, 68, 0.3);
}

.window-link-actions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.btn-link-terminal {
  padding: 10px 14px;
  background: rgba(34, 197, 94, 0.15);
  border: 1px solid rgba(34, 197, 94, 0.3);
  border-radius: 8px;
  color: #22c55e;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.btn-link-terminal:hover:not(:disabled) {
  background: rgba(34, 197, 94, 0.25);
  border-color: rgba(34, 197, 94, 0.5);
}

.btn-link-terminal:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.btn-link-existing {
  padding: 10px 14px;
  background: rgba(99, 102, 241, 0.15);
  border: 1px solid rgba(99, 102, 241, 0.3);
  border-radius: 8px;
  color: #818cf8;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.btn-link-existing:hover {
  background: rgba(99, 102, 241, 0.25);
  border-color: rgba(99, 102, 241, 0.5);
}

.window-select-inline {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 8px;
  display: flex;
  flex-direction: column;
  gap: 6px;
  max-height: 200px;
  overflow-y: auto;
}

.window-loading,
.window-empty-inline {
  padding: 12px;
  text-align: center;
  color: #71717a;
  font-size: 13px;
}

.window-item-inline {
  padding: 10px 12px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 6px;
  color: #f4f4f5;
  font-size: 13px;
  text-align: left;
  cursor: pointer;
  transition: all 0.15s ease;
}

.window-item-inline:hover {
  background: rgba(255, 255, 255, 0.1);
}

.window-item-inline.window-item-terminal:hover {
  background: rgba(34, 197, 94, 0.15);
  border-color: rgba(34, 197, 94, 0.3);
}

.window-item-inline.window-item-finder:hover {
  background: rgba(59, 130, 246, 0.15);
  border-color: rgba(59, 130, 246, 0.3);
}

.window-item-inline {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.window-item-name {
  font-weight: 500;
}

.window-item-preview {
  font-size: 11px;
  color: #71717a;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Window preview in WindowSelectModal */
.window-preview {
  display: block;
  font-size: 11px;
  color: #71717a;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  margin-top: 2px;
}

.window-id {
  display: block;
  font-size: 10px;
  color: #52525b;
  font-family: 'SF Mono', Monaco, Consolas, monospace;
  margin-top: 2px;
}

/* Window Carousel */
.window-carousel {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
}

.carousel-btn {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: rgba(99, 102, 241, 0.2);
  border: 1px solid rgba(99, 102, 241, 0.3);
  color: #818cf8;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.15s ease;
  flex-shrink: 0;
}

.carousel-btn:hover:not(:disabled) {
  background: rgba(99, 102, 241, 0.3);
}

.carousel-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

.carousel-current {
  flex: 1;
  text-align: center;
  padding: 10px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 8px;
  min-width: 0;
}

.carousel-counter {
  display: block;
  font-size: 11px;
  color: #71717a;
  margin-bottom: 4px;
}

.carousel-name {
  display: block;
  font-size: 14px;
  font-weight: 500;
  color: #f4f4f5;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.carousel-preview {
  display: block;
  font-size: 11px;
  color: #22c55e;
  margin-top: 4px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.carousel-id {
  display: block;
  font-size: 10px;
  color: #52525b;
  font-family: 'SF Mono', Monaco, Consolas, monospace;
  margin-top: 2px;
}

.btn-confirm-window {
  width: 100%;
  padding: 14px;
  background: #22c55e;
  border: none;
  border-radius: 8px;
  color: #fff;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s ease;
  margin-bottom: 10px;
}

.btn-confirm-window:hover {
  background: #16a34a;
}

.btn-confirm-window:active {
  transform: scale(0.98);
}

.window-list-mini {
  display: flex;
  gap: 6px;
  justify-content: center;
  flex-wrap: wrap;
}

.window-item-mini {
  width: 28px;
  height: 28px;
  border-radius: 6px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  color: #71717a;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.window-item-mini:hover {
  background: rgba(255, 255, 255, 0.1);
  color: #f4f4f5;
}

.window-item-mini.active {
  background: rgba(99, 102, 241, 0.3);
  border-color: rgba(99, 102, 241, 0.5);
  color: #fff;
}

/* Scrollbar Styles */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.15);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.25);
}

/* Reminder Notification Styles */
.reminder-notification {
  position: fixed;
  bottom: 20px;
  right: 20px;
  max-width: 400px;
  background: rgba(30, 30, 46, 0.95);
  border: 1px solid rgba(251, 191, 36, 0.4);
  border-radius: 12px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
  z-index: 50;
}

.reminder-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 14px 16px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.reminder-title {
  display: flex;
  align-items: center;
  gap: 10px;
  color: #fbbf24;
  font-size: 13px;
  font-weight: 500;
}

.reminder-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  background: rgba(251, 191, 36, 0.2);
  border-radius: 50%;
  font-size: 12px;
  font-weight: 700;
}

.reminder-actions {
  display: flex;
  gap: 8px;
}

.reminder-toggle {
  padding: 5px 12px;
  background: rgba(251, 191, 36, 0.15);
  border: 1px solid rgba(251, 191, 36, 0.3);
  border-radius: 6px;
  color: #fbbf24;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.reminder-toggle:hover {
  background: rgba(251, 191, 36, 0.25);
}

.reminder-dismiss {
  padding: 5px 8px;
  background: none;
  border: none;
  color: #71717a;
  font-size: 16px;
  cursor: pointer;
  transition: color 0.15s ease;
}

.reminder-dismiss:hover {
  color: #fff;
}

.reminder-content {
  display: flex;
  flex-direction: column;
}

.reminder-tabs {
  display: flex;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.reminder-tab {
  flex: 1;
  padding: 10px 12px;
  background: none;
  border: none;
  color: #71717a;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.15s ease;
  border-bottom: 2px solid transparent;
}

.reminder-tab:hover {
  color: #a1a1aa;
}

.reminder-tab.active {
  color: #fbbf24;
  border-bottom-color: #fbbf24;
}

.reminder-list {
  padding: 12px;
  max-height: 250px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.reminder-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 12px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 8px;
  gap: 12px;
}

.reminder-item-info {
  display: flex;
  flex-direction: column;
  gap: 4px;
  flex: 1;
  min-width: 0;
}

.reminder-app-badge {
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 10px;
  font-weight: 600;
  width: fit-content;
}

.reminder-app-badge.terminal {
  background: rgba(34, 197, 94, 0.2);
  color: #22c55e;
}

.reminder-app-badge.finder {
  background: rgba(59, 130, 246, 0.2);
  color: #3b82f6;
}

.reminder-window-name {
  color: #e4e4e7;
  font-size: 12px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.reminder-add-button {
  padding: 6px 12px;
  background: rgba(99, 102, 241, 0.2);
  border: 1px solid rgba(99, 102, 241, 0.3);
  border-radius: 6px;
  color: #a78bfa;
  font-size: 11px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
  flex-shrink: 0;
}

.reminder-add-button:hover {
  background: rgba(99, 102, 241, 0.3);
  border-color: rgba(99, 102, 241, 0.5);
}

.reminder-item.broken {
  border-left: 3px solid #ef4444;
}

.reminder-relink-button {
  padding: 6px 12px;
  background: rgba(239, 68, 68, 0.2);
  border: 1px solid rgba(239, 68, 68, 0.3);
  border-radius: 6px;
  color: #f87171;
  font-size: 11px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
  flex-shrink: 0;
}

.reminder-relink-button:hover {
  background: rgba(239, 68, 68, 0.3);
  border-color: rgba(239, 68, 68, 0.5);
}

/* Export Modal Styles */
.export-modal {
  max-width: 700px;
  max-height: 85vh;
  display: flex;
  flex-direction: column;
}

.export-format-selector {
  display: flex;
  gap: 8px;
  padding: 16px 24px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.format-btn {
  padding: 8px 16px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 6px;
  color: #a1a1aa;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.format-btn:hover {
  background: rgba(255, 255, 255, 0.1);
  color: #fff;
}

.format-btn.active {
  background: rgba(99, 102, 241, 0.2);
  border-color: rgba(99, 102, 241, 0.5);
  color: #a78bfa;
}

/* エクスポートフィルター */
.export-filters {
  display: flex;
  gap: 24px;
  padding: 12px 24px;
  background: rgba(0, 0, 0, 0.15);
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.filter-group {
  display: flex;
  align-items: center;
  gap: 12px;
}

.filter-label {
  font-size: 12px;
  color: #a1a1aa;
  font-weight: 500;
}

.filter-checkbox {
  display: flex;
  align-items: center;
  gap: 6px;
  cursor: pointer;
}

.filter-checkbox input[type="checkbox"] {
  width: 14px;
  height: 14px;
  accent-color: #8b5cf6;
  cursor: pointer;
}

.filter-tag,
.filter-status {
  font-size: 12px;
  padding: 2px 8px;
  border-radius: 4px;
}

.filter-tag.terminal {
  background: rgba(34, 197, 94, 0.15);
  color: #22c55e;
}

.filter-tag.finder {
  background: rgba(59, 130, 246, 0.15);
  color: #3b82f6;
}

.filter-status.todo {
  background: rgba(161, 161, 170, 0.15);
  color: #a1a1aa;
}

.filter-status.in-progress {
  background: rgba(245, 158, 11, 0.15);
  color: #f59e0b;
}

.filter-status.done {
  background: rgba(34, 197, 94, 0.15);
  color: #22c55e;
}

.export-preview {
  flex: 1;
  overflow-y: auto;
  padding: 16px 24px;
  background: rgba(0, 0, 0, 0.2);
  margin: 16px;
  border-radius: 8px;
  max-height: 400px;
}

.export-preview pre {
  font-family: 'SF Mono', Monaco, Consolas, monospace;
  font-size: 12px;
  line-height: 1.6;
  color: #e4e4e7;
  white-space: pre-wrap;
  word-wrap: break-word;
  margin: 0;
}

.export-actions {
  display: flex;
  gap: 12px;
  padding: 16px 24px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.btn-copy {
  flex: 1;
  padding: 12px 16px;
  background: rgba(99, 102, 241, 0.15);
  border: 1px solid rgba(99, 102, 241, 0.3);
  border-radius: 8px;
  color: #a78bfa;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.btn-copy:hover {
  background: rgba(99, 102, 241, 0.25);
  border-color: rgba(99, 102, 241, 0.5);
}

.btn-save {
  flex: 1;
  padding: 12px 16px;
  background: rgba(34, 197, 94, 0.15);
  border: 1px solid rgba(34, 197, 94, 0.3);
  border-radius: 8px;
  color: #22c55e;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.btn-save:hover {
  background: rgba(34, 197, 94, 0.25);
  border-color: rgba(34, 197, 94, 0.5);
}

.btn-obsidian {
  flex: 1;
  padding: 12px 16px;
  background: rgba(139, 92, 246, 0.15);
  border: 1px solid rgba(139, 92, 246, 0.3);
  border-radius: 8px;
  color: #a78bfa;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.btn-obsidian:hover {
  background: rgba(139, 92, 246, 0.25);
  border-color: rgba(139, 92, 246, 0.5);
}

/* Header Actions */
.header-actions {
  display: flex;
  gap: 8px;
}

.add-all-btn {
  padding: 8px 16px;
  background: rgba(34, 197, 94, 0.15);
  border: 1px solid rgba(34, 197, 94, 0.3);
  border-radius: 8px;
  color: #22c55e;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.add-all-btn:hover {
  background: rgba(34, 197, 94, 0.25);
  border-color: rgba(34, 197, 94, 0.5);
}

.settings-btn {
  padding: 8px 16px;
  background: rgba(113, 113, 122, 0.15);
  border: 1px solid rgba(113, 113, 122, 0.3);
  border-radius: 8px;
  color: #a1a1aa;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.settings-btn:hover {
  background: rgba(113, 113, 122, 0.25);
  border-color: rgba(113, 113, 122, 0.5);
  color: #fff;
}

/* Settings Modal */
.settings-modal {
  max-width: 500px;
  max-height: 85vh;
  display: flex;
  flex-direction: column;
}

.settings-content {
  padding: 24px;
  overflow-y: auto;
  flex: 1;
}

.settings-section h3 {
  font-size: 14px;
  font-weight: 600;
  color: #a78bfa;
  margin-bottom: 16px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.settings-section-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 16px;
}

.settings-section-header h3 {
  margin-bottom: 0;
}

.path-input-container {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.path-input-wrapper {
  display: flex;
  align-items: center;
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(34, 197, 94, 0.3);
  border-radius: 8px;
  overflow: hidden;
}

.path-prefix {
  padding: 12px;
  color: #22c55e;
  font-family: 'SF Mono', Monaco, Consolas, monospace;
  font-size: 14px;
  background: rgba(34, 197, 94, 0.1);
}

.path-input {
  flex: 1;
  padding: 12px 14px;
  background: transparent;
  border: none;
  color: #22c55e;
  font-family: 'SF Mono', Monaco, Consolas, monospace;
  font-size: 13px;
}

.path-input:focus {
  outline: none;
}

.path-input::placeholder {
  color: rgba(34, 197, 94, 0.5);
}

.path-input-wrapper:focus-within {
  border-color: rgba(34, 197, 94, 0.6);
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.1);
}

.btn-browse {
  padding: 10px 16px;
  background: rgba(99, 102, 241, 0.15);
  border: 1px solid rgba(99, 102, 241, 0.3);
  border-radius: 8px;
  color: #a78bfa;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.15s ease;
  white-space: nowrap;
  align-self: flex-start;
}

.btn-browse:hover {
  background: rgba(99, 102, 241, 0.25);
  border-color: rgba(99, 102, 241, 0.5);
}

.form-hint {
  display: block;
  font-size: 11px;
  color: #71717a;
  margin-top: 6px;
}

/* Note Select Modal */
.note-select-modal {
  max-width: 480px;
  max-height: 80vh;
}

.note-select-content {
  padding: 16px 24px 24px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.btn-create-today {
  padding: 14px 20px;
  background: linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(34, 197, 94, 0.1));
  border: 1px solid rgba(34, 197, 94, 0.4);
  border-radius: 10px;
  color: #22c55e;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s ease;
}

.btn-create-today:hover:not(:disabled) {
  background: linear-gradient(135deg, rgba(34, 197, 94, 0.3), rgba(34, 197, 94, 0.2));
  border-color: rgba(34, 197, 94, 0.6);
}

.btn-create-today:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.note-select-divider {
  display: flex;
  align-items: center;
  gap: 12px;
  color: #71717a;
  font-size: 12px;
}

.note-select-divider::before,
.note-select-divider::after {
  content: '';
  flex: 1;
  height: 1px;
  background: rgba(255, 255, 255, 0.1);
}

.note-select-loading,
.note-select-error,
.note-select-empty {
  padding: 24px;
  text-align: center;
  color: #a1a1aa;
  font-size: 13px;
}

.note-select-error {
  color: #ef4444;
}

.note-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
  max-height: 300px;
  overflow-y: auto;
}

.note-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 14px;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.note-item:hover:not(:disabled) {
  background: rgba(255, 255, 255, 0.08);
  border-color: rgba(255, 255, 255, 0.15);
}

.note-item:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.note-name {
  color: #e4e4e7;
  font-size: 13px;
  font-weight: 500;
}

.note-date {
  color: #71717a;
  font-size: 11px;
}

/* Task List in Card */
.card-tasks {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin-top: 8px;
}

.task-item {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  cursor: pointer;
  padding: 4px 6px;
  margin: -4px -6px;
  border-radius: 4px;
  transition: background 0.15s ease;
}

.task-item:hover {
  background: rgba(255, 255, 255, 0.05);
}

.task-checkbox {
  width: 16px;
  height: 16px;
  min-width: 16px;
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  color: #22c55e;
  transition: all 0.15s ease;
  margin-top: 1px;
}

.task-checkbox.checked {
  background: rgba(34, 197, 94, 0.2);
  border-color: #22c55e;
}

.task-text {
  font-size: 12px;
  color: #a1a1aa;
  line-height: 1.4;
}

.task-item.completed .task-text {
  text-decoration: line-through;
  color: #71717a;
}

/* Extended Checkbox States */
.task-checkbox.deferred {
  background: rgba(251, 191, 36, 0.2);
  border-color: #fbbf24;
  color: #fbbf24;
}

.task-checkbox.scheduled {
  background: rgba(59, 130, 246, 0.2);
  border-color: #3b82f6;
  color: #3b82f6;
}

.task-checkbox.cancelled {
  background: rgba(239, 68, 68, 0.2);
  border-color: #ef4444;
  color: #ef4444;
}

.task-item.cancelled .task-text {
  text-decoration: line-through;
  color: #71717a;
}

.task-checkbox.important {
  background: rgba(234, 179, 8, 0.2);
  border-color: #eab308;
  color: #eab308;
}

.task-checkbox.in-progress {
  background: rgba(14, 165, 233, 0.2);
  border-color: #0ea5e9;
  color: #0ea5e9;
}

.task-checkbox.on-hold {
  background: rgba(168, 162, 158, 0.2);
  border-color: #a8a29e;
  color: #a8a29e;
}

.task-checkbox.paused {
  background: rgba(249, 115, 22, 0.2);
  border-color: #f97316;
  color: #f97316;
}

/* Task Item with Plugin Actions */
.task-item-wrapper {
  display: flex;
  align-items: center;
  gap: 4px;
}

.task-item-wrapper .task-item {
  flex: 1;
}

.task-actions {
  display: flex;
  gap: 2px;
  opacity: 0;
  transition: opacity 0.15s ease;
}

.task-item-wrapper:hover .task-actions {
  opacity: 1;
}

.task-action-btn {
  padding: 2px 6px;
  background: rgba(139, 92, 246, 0.2);
  border: 1px solid rgba(139, 92, 246, 0.3);
  border-radius: 4px;
  color: #a78bfa;
  font-size: 10px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.task-action-btn:hover {
  background: rgba(139, 92, 246, 0.3);
  border-color: rgba(139, 92, 246, 0.5);
}

/* タイマーアクティブなタスク */
.task-item-wrapper.timer-active {
  background: rgba(34, 197, 94, 0.1);
  border-radius: 4px;
}

.task-timer-indicator {
  margin-left: 6px;
  font-size: 12px;
}

.task-timer-indicator.running {
  animation: timerPulse 1s ease-in-out infinite;
}

.task-timer-indicator.paused {
  opacity: 0.6;
}

@keyframes timerPulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

/* 通常リスト項目 */
.list-item-wrapper {
  display: flex;
  align-items: baseline;
  gap: 6px;
  padding: 1px 0;
  font-size: 12px;
  line-height: 1.5;
}

.list-item-bullet {
  color: rgba(255, 255, 255, 0.4);
  flex-shrink: 0;
  font-weight: 600;
}

.list-item-text {
  color: #e4e4e7;
}

.theme-light .list-item-bullet {
  color: rgba(0, 0, 0, 0.45);
}

.theme-light .list-item-text {
  color: #1a1a2e;
}

/* タスク追加UI */
.task-add-area {
  margin-top: 4px;
  padding-top: 2px;
}

.task-add-toggle {
  background: none;
  border: 1px dashed rgba(255, 255, 255, 0.15);
  border-radius: 4px;
  color: rgba(255, 255, 255, 0.4);
  font-size: 11px;
  padding: 3px 8px;
  cursor: pointer;
  width: 100%;
  text-align: left;
  transition: all 0.15s;
}

.task-add-toggle:hover {
  border-color: rgba(59, 130, 246, 0.4);
  color: rgba(59, 130, 246, 0.8);
  background: rgba(59, 130, 246, 0.05);
}

.task-add-input-wrapper {
  display: flex;
  gap: 4px;
  align-items: center;
}

.task-add-input {
  flex: 1;
  background: rgba(255, 255, 255, 0.06);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 4px;
  color: #e4e4e7;
  font-size: 11px;
  padding: 3px 8px;
  outline: none;
  transition: border-color 0.15s;
}

.task-add-input:focus {
  border-color: rgba(59, 130, 246, 0.5);
}

.task-add-input::placeholder {
  color: rgba(255, 255, 255, 0.3);
}

.task-add-confirm {
  background: rgba(59, 130, 246, 0.2);
  border: 1px solid rgba(59, 130, 246, 0.3);
  border-radius: 4px;
  color: rgba(59, 130, 246, 0.9);
  font-size: 13px;
  font-weight: 600;
  width: 24px;
  height: 24px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s;
  padding: 0;
  line-height: 1;
}

.task-add-confirm:hover:not(:disabled) {
  background: rgba(59, 130, 246, 0.3);
}

.task-add-confirm:disabled {
  opacity: 0.3;
  cursor: default;
}

/* ライトテーマ */
.theme-light .task-add-toggle {
  border-color: rgba(0, 0, 0, 0.18);
  color: rgba(0, 0, 0, 0.45);
}

.theme-light .task-add-toggle:hover {
  border-color: rgba(59, 130, 246, 0.4);
  color: rgba(59, 130, 246, 0.8);
  background: rgba(59, 130, 246, 0.05);
}

.theme-light .task-add-input {
  background: rgba(255, 255, 255, 0.8);
  border-color: rgba(0, 0, 0, 0.15);
  color: #1a1a1a;
}

.theme-light .task-add-input::placeholder {
  color: #999;
}

/* タイマーメニュー */
.timer-menu {
  padding: 8px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  margin-bottom: 8px;
}

.timer-menu-header {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 8px;
  font-size: 13px;
  color: #a1a1aa;
}

.timer-icon {
  font-size: 14px;
}

.timer-elapsed {
  margin-left: auto;
  font-family: monospace;
  font-size: 12px;
  color: #22c55e;
}

.timer-menu-actions {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

/* 横並びレイアウト */
.timer-menu-actions.horizontal {
  flex-direction: row;
  gap: 6px;
}

.timer-menu-actions.horizontal .timer-action-btn {
  width: auto;
  padding: 8px 12px;
  font-size: 16px;
  justify-content: center;
  flex: 1;
}

.timer-status {
  margin-left: auto;
  font-size: 11px;
  padding: 2px 6px;
  border-radius: 4px;
}

.timer-status.running {
  background: rgba(34, 197, 94, 0.2);
  color: #22c55e;
  animation: timerPulse 1.5s ease-in-out infinite;
}

.timer-action-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 6px;
  color: #e4e4e7;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.15s ease;
  width: 100%;
  text-align: left;
}

.timer-action-btn:hover {
  background: rgba(255, 255, 255, 0.1);
}

.timer-action-btn.start {
  color: #22c55e;
}

.timer-action-btn.start:hover {
  background: rgba(34, 197, 94, 0.2);
  border-color: rgba(34, 197, 94, 0.3);
}

.timer-action-btn.pause {
  color: #f59e0b;
}

.timer-action-btn.pause:hover {
  background: rgba(245, 158, 11, 0.2);
  border-color: rgba(245, 158, 11, 0.3);
}

.timer-action-btn.resume {
  color: #22c55e;
}

.timer-action-btn.resume:hover {
  background: rgba(34, 197, 94, 0.2);
  border-color: rgba(34, 197, 94, 0.3);
}

.timer-action-btn.stop {
  color: #3b82f6;
}

.timer-action-btn.stop:hover {
  background: rgba(59, 130, 246, 0.2);
  border-color: rgba(59, 130, 246, 0.3);
}

.timer-action-btn.cancel {
  color: #71717a;
}

.timer-action-btn.cancel:hover {
  background: rgba(113, 113, 122, 0.2);
}

/* 無効状態のボタン */
.timer-action-btn.disabled {
  opacity: 0.3;
  cursor: not-allowed;
  pointer-events: none;
}

.timer-action-btn.disabled:hover {
  background: rgba(255, 255, 255, 0.05);
  border-color: rgba(255, 255, 255, 0.1);
}

/* ============================================
   コンテキストメニュー共通スタイル（Portal版）
   ============================================ */
.context-menu-portal {
  animation: contextMenuFadeIn 0.1s ease-out;
}

@keyframes contextMenuFadeIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* タスク行の右クリックメニュー */
.task-context-menu {
  background: #1f1f23;
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 8px;
  padding: 8px;
  min-width: 220px;
  max-height: 450px;
  overflow-y: auto;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
}

/* カードの右クリックメニュー */
.card-context-menu {
  background: #1f1f23;
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 8px;
  min-width: 200px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.context-menu-topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 8px 6px 12px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
}

.theme-light .context-menu-topbar {
  border-bottom-color: rgba(0, 0, 0, 0.08);
}

.context-menu-topbar-title {
  font-size: 11px;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.5);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.theme-light .context-menu-topbar-title {
  color: #555;
}

.context-menu-close {
  background: none;
  border: none;
  color: rgba(255, 255, 255, 0.4);
  font-size: 13px;
  cursor: pointer;
  padding: 2px 6px;
  border-radius: 4px;
  line-height: 1;
}

.context-menu-close:hover {
  color: #ef4444;
  background: rgba(239, 68, 68, 0.15);
}

.theme-light .context-menu-close {
  color: rgba(0, 0, 0, 0.4);
}

.theme-light .context-menu-close:hover {
  color: #dc2626;
  background: rgba(220, 38, 38, 0.1);
}

.context-menu-header {
  font-size: 11px;
  font-weight: 600;
  color: #8b5cf6;
  padding: 8px 12px 4px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.context-menu-section {
  padding: 4px 0;
}

.context-menu-divider {
  height: 1px;
  background: rgba(255, 255, 255, 0.1);
  margin: 4px 0;
}

.context-menu-actions {
  padding: 4px 0;
}

.context-menu-action {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  padding: 8px 12px;
  background: transparent;
  border: none;
  color: #e4e4e7;
  font-size: 13px;
  cursor: pointer;
  text-align: left;
  transition: background 0.1s ease;
}

.context-menu-action:hover {
  background: rgba(139, 92, 246, 0.15);
}

.context-menu-action.danger:hover {
  background: rgba(239, 68, 68, 0.15);
  color: #ef4444;
}

.context-action-icon {
  width: 18px;
  font-size: 14px;
  text-align: center;
}

/* Priority Menu */
.priority-menu {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  padding: 4px 12px 8px;
}

.priority-item {
  display: flex;
  align-items: center;
  gap: 4px;
  background: rgba(255, 255, 255, 0.06);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 6px;
  padding: 4px 10px;
  color: rgba(255, 255, 255, 0.7);
  font-size: 12px;
  cursor: pointer;
  transition: background 0.1s ease, border-color 0.1s ease;
}

.priority-item:hover {
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.2);
}

.priority-item.active {
  background: rgba(139, 92, 246, 0.2);
  border-color: rgba(139, 92, 246, 0.4);
  color: #c4b5fd;
}

.priority-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

.priority-label {
  font-weight: 500;
}

.priority-add-btn {
  color: rgba(255, 255, 255, 0.4);
  font-size: 14px;
  min-width: 28px;
  justify-content: center;
}

.priority-add-form {
  padding: 6px 12px 8px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.priority-add-input {
  width: 100%;
  padding: 5px 8px;
  background: rgba(255, 255, 255, 0.06);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 5px;
  color: #e2e8f0;
  font-size: 12px;
  outline: none;
}

.priority-add-input:focus {
  border-color: rgba(139, 92, 246, 0.5);
}

.priority-add-colors {
  display: flex;
  gap: 3px;
  flex-wrap: wrap;
}

.priority-color-option {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  border: 2px solid transparent;
  cursor: pointer;
  transition: border-color 0.1s;
}

.priority-color-option.selected {
  border-color: #fff;
}

.priority-add-confirm {
  padding: 4px 10px;
  background: rgba(139, 92, 246, 0.2);
  border: 1px solid rgba(139, 92, 246, 0.4);
  border-radius: 5px;
  color: #c4b5fd;
  font-size: 11px;
  cursor: pointer;
  align-self: flex-end;
}

.priority-add-confirm:hover {
  background: rgba(139, 92, 246, 0.3);
}

.priority-add-confirm:disabled {
  opacity: 0.4;
  cursor: default;
}

.theme-light .priority-add-btn {
  color: rgba(0, 0, 0, 0.3);
}

.theme-light .priority-add-input {
  background: #f8fafc;
  border-color: #e2e8f0;
  color: #334155;
}

.theme-light .priority-add-input:focus {
  border-color: rgba(99, 102, 241, 0.5);
}

.theme-light .priority-color-option.selected {
  border-color: #334155;
}

.theme-light .color-custom-input.round {
  border-color: rgba(0, 0, 0, 0.2);
  color: rgba(0, 0, 0, 0.4);
}
.theme-light .color-custom-input.round:hover {
  border-color: rgba(0, 0, 0, 0.4);
  color: rgba(0, 0, 0, 0.6);
}

.theme-light .priority-add-confirm {
  background: rgba(99, 102, 241, 0.1);
  border-color: rgba(99, 102, 241, 0.3);
  color: #4f46e5;
}

.theme-light .priority-item {
  background: #f8fafc;
  border-color: #e2e8f0;
  color: #475569;
}

.theme-light .priority-item:hover {
  background: #f1f5f9;
  border-color: #cbd5e1;
}

.theme-light .priority-item.active {
  background: rgba(99, 102, 241, 0.1);
  border-color: rgba(99, 102, 241, 0.3);
  color: #4f46e5;
}

/* チェックボックスサブメニュー */
.checkbox-submenu {
  padding: 4px 0;
}

.checkbox-menu-group {
  margin-bottom: 8px;
}

.checkbox-menu-group:last-of-type {
  margin-bottom: 0;
}

.checkbox-menu-group-label {
  font-size: 10px;
  font-weight: 600;
  color: #71717a;
  text-transform: uppercase;
  padding: 4px 8px;
  margin-bottom: 4px;
}

.checkbox-menu-items {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 2px;
}

.checkbox-menu-item {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 8px;
  background: transparent;
  border: none;
  border-radius: 4px;
  color: #e4e4e7;
  font-size: 12px;
  cursor: pointer;
  text-align: left;
  transition: all 0.1s ease;
}

.checkbox-menu-item:hover {
  background: rgba(139, 92, 246, 0.2);
}

.checkbox-menu-item.active {
  background: rgba(139, 92, 246, 0.3);
  color: #a78bfa;
}

.checkbox-menu-icon {
  width: 18px;
  text-align: center;
  font-size: 14px;
}

.checkbox-menu-label {
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.checkbox-menu-help {
  padding: 8px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  margin-top: 8px;
  text-align: center;
}

.checkbox-menu-help a {
  font-size: 11px;
  color: #8b5cf6;
  text-decoration: none;
}

.checkbox-menu-help a:hover {
  text-decoration: underline;
}

/* カードステータスメニュー */
.card-status-menu {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  padding: 8px;
}

.card-status-item {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 6px 10px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 6px;
  color: #e4e4e7;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.1s ease;
}

.card-status-item:hover {
  background: rgba(139, 92, 246, 0.2);
  border-color: rgba(139, 92, 246, 0.3);
}

.card-status-item.active {
  background: rgba(139, 92, 246, 0.3);
  border-color: #8b5cf6;
  color: #a78bfa;
}

.card-status-icon {
  font-size: 14px;
}

.card-status-label {
  font-size: 11px;
}

/* カードヘッダーのステータスマーカー */
.card-status-marker {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 16px;
  height: 16px;
  min-width: 16px;
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-radius: 4px;
  font-size: 11px;
  cursor: pointer;
  transition: all 0.15s ease;
  margin-right: 6px;
}

.card-status-marker:hover {
  border-color: rgba(255, 255, 255, 0.5);
  background: rgba(255, 255, 255, 0.05);
}

.card-status-marker.completed {
  background: rgba(34, 197, 94, 0.2);
  border-color: #22c55e;
  color: #22c55e;
}

.card-status-marker.in-progress {
  background: rgba(14, 165, 233, 0.2);
  border-color: #0ea5e9;
  color: #0ea5e9;
}

.card-status-marker.deferred {
  background: rgba(251, 191, 36, 0.2);
  border-color: #fbbf24;
  color: #fbbf24;
}

.card-status-marker.cancelled {
  background: rgba(239, 68, 68, 0.2);
  border-color: #ef4444;
  color: #ef4444;
}

.card-status-marker.important {
  background: rgba(234, 179, 8, 0.2);
  border-color: #eab308;
  color: #eab308;
}

.card-status-marker.question {
  background: rgba(249, 115, 22, 0.2);
  border-color: #f97316;
  color: #f97316;
}

.card-status-marker.idea {
  background: rgba(234, 179, 8, 0.2);
  border-color: #eab308;
  color: #eab308;
}

.card-status-marker.doing {
  background: rgba(245, 158, 11, 0.2);
  border-color: #f59e0b;
  color: #f59e0b;
}

/* 追加のチェックボックス状態スタイル */
.task-checkbox.doing { color: #f59e0b; }
.task-checkbox.question { color: #f97316; }
.task-checkbox.add { color: #22c55e; }
.task-checkbox.idea { color: #eab308; }
.task-checkbox.brainstorm { color: #a855f7; }
.task-checkbox.research { color: #3b82f6; }
.task-checkbox.pro { color: #22c55e; }
.task-checkbox.con { color: #ef4444; }
.task-checkbox.quote { color: #6366f1; }
.task-checkbox.note { color: #71717a; }
.task-checkbox.info { color: #06b6d4; }
.task-checkbox.bookmark { color: #f59e0b; }
.task-checkbox.paraphrase { color: #a1a1aa; }
.task-checkbox.location { color: #ef4444; }
.task-checkbox.example { color: #8b5cf6; }
.task-checkbox.answer { color: #22c55e; }
.task-checkbox.reward { color: #f59e0b; }
.task-checkbox.choice { color: #6366f1; }
.task-checkbox.time { color: #f97316; }
.task-checkbox.person { color: #06b6d4; }
.task-checkbox.talk { color: #a855f7; }
.task-checkbox.outline { color: #3b82f6; }
.task-checkbox.conflict { color: #ef4444; }
.task-checkbox.world { color: #22c55e; }
.task-checkbox.find { color: #f59e0b; }
.task-checkbox.foreshadow { color: #8b5cf6; }
.task-checkbox.favorite { color: #ef4444; }
.task-checkbox.symbol { color: #6366f1; }
.task-checkbox.secret { color: #71717a; }
.task-checkbox.date { color: #3b82f6; }

/* Card Plugin Actions */
.card-plugin-action {
  padding: 4px 6px;
  background: rgba(139, 92, 246, 0.15);
  border: 1px solid rgba(139, 92, 246, 0.25);
  border-radius: 4px;
  color: #a78bfa;
  font-size: 11px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.card-plugin-action:hover {
  background: rgba(139, 92, 246, 0.25);
  border-color: rgba(139, 92, 246, 0.4);
}

/* Card Footer Actions */
.card-footer-actions {
  display: flex;
  gap: 4px;
  margin-top: 8px;
  padding-top: 8px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.card-footer-action-btn {
  flex: 1;
  padding: 6px 10px;
  background: rgba(139, 92, 246, 0.15);
  border: 1px solid rgba(139, 92, 246, 0.25);
  border-radius: 4px;
  color: #a78bfa;
  font-size: 11px;
  cursor: pointer;
  transition: all 0.15s ease;
  text-align: center;
}

.card-footer-action-btn:hover {
  background: rgba(139, 92, 246, 0.25);
  border-color: rgba(139, 92, 246, 0.4);
}

.card-description-line {
  font-size: 12px;
  color: #a1a1aa;
  margin: 2px 0;
}

/* Add Task Button in Modal */
.btn-add-task {
  margin-left: 8px;
  padding: 2px 8px;
  background: rgba(34, 197, 94, 0.15);
  border: 1px solid rgba(34, 197, 94, 0.3);
  border-radius: 4px;
  color: #22c55e;
  font-size: 11px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.btn-add-task:hover {
  background: rgba(34, 197, 94, 0.25);
  border-color: rgba(34, 197, 94, 0.5);
}

.form-group label {
  display: flex;
  align-items: center;
}

/* Radio Group */
.radio-group {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.radio-label {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 14px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.radio-label:hover {
  background: rgba(255, 255, 255, 0.08);
  border-color: rgba(255, 255, 255, 0.15);
}

.radio-label input[type="radio"] {
  width: 16px;
  height: 16px;
  accent-color: #6366f1;
  cursor: pointer;
}

.radio-label span {
  color: #e4e4e7;
  font-size: 13px;
}

/* Clickable Card */
.card.card-clickable {
  cursor: pointer;
}

.card.card-clickable:hover {
  border-color: rgba(99, 102, 241, 0.4);
}

/* Window Link Status Indicator */
.card.card-linked {
  background: rgba(34, 197, 94, 0.03);
}

.card.card-linked:hover {
  background: rgba(34, 197, 94, 0.08);
}

.card.card-unlinked {
}

.card.card-unlinked:hover {
}

.card.card-broken-link {
  background: rgba(239, 68, 68, 0.03);
  opacity: 0.7;
}

.card.card-broken-link:hover {
  background: rgba(239, 68, 68, 0.08);
  opacity: 1;
}

.card.card-broken-link .card-jump-button {
  background: rgba(239, 68, 68, 0.15);
  border-color: rgba(239, 68, 68, 0.3);
  color: #f87171;
}

.card.card-broken-link .card-jump-button:hover {
  background: rgba(239, 68, 68, 0.25);
}

/* ウィンドウジャンプ中のパルスアニメーション */
.card.card-jumping {
  animation: card-jump-pulse 0.6s ease-out;
}

@keyframes card-jump-pulse {
  0% {
    border-color: rgba(59, 130, 246, 0.8);
    box-shadow: 0 0 8px rgba(59, 130, 246, 0.4);
  }
  100% {
    border-color: transparent;
    box-shadow: none;
  }
}

/* Settings Section Spacing */
.settings-section {
  margin-bottom: 24px;
}

.settings-section:last-child {
  margin-bottom: 0;
}

.settings-troubleshoot-hint {
  margin: 8px 0 4px;
  padding: 8px 12px;
  font-size: 11px;
  color: #a1a1aa;
  background: rgba(255, 255, 255, 0.02);
  border-radius: 6px;
  border: 1px solid rgba(255, 255, 255, 0.04);
}

.settings-troubleshoot-hint b {
  color: #d4d4d8;
}

.theme-light .settings-troubleshoot-hint {
  color: #71717a;
  background: rgba(0, 0, 0, 0.02);
  border-color: rgba(0, 0, 0, 0.04);
}

.theme-light .settings-troubleshoot-hint b {
  color: #3f3f46;
}

/* 設定2カラムグリッド */
.settings-grid-2col {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

.form-group-compact {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.form-group-compact label {
  font-size: 11px;
  font-weight: 500;
  color: rgba(255, 255, 255, 0.5);
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

/* トグルグループ（コンパクトなセグメントボタン） */
.toggle-group {
  display: flex;
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 6px;
  overflow: hidden;
}

.toggle-option {
  flex: 1;
  padding: 6px 10px;
  border: none;
  background: none;
  color: rgba(255, 255, 255, 0.45);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.15s;
  white-space: nowrap;
}

.toggle-option:not(:last-child) {
  border-right: 1px solid rgba(255, 255, 255, 0.08);
}

.toggle-option.active {
  background: rgba(139, 92, 246, 0.2);
  color: #a78bfa;
  font-weight: 500;
}

.toggle-option:hover:not(.active) {
  background: rgba(255, 255, 255, 0.05);
  color: rgba(255, 255, 255, 0.7);
}

/* ライトテーマ */
.theme-light .form-group-compact label {
  color: #3d3d3d;
}

.theme-light .toggle-group {
  border-color: rgba(0, 0, 0, 0.15);
}

.theme-light .toggle-option {
  color: #555;
}

.theme-light .toggle-option:not(:last-child) {
  border-right-color: rgba(0, 0, 0, 0.1);
}

.theme-light .toggle-option.active {
  background: rgba(91, 94, 214, 0.12);
  color: #4a4dc8;
}

.theme-light .toggle-option:hover:not(.active) {
  background: rgba(0, 0, 0, 0.05);
  color: #3d3d3d;
}

/* Card Markdown Styles */
.card-markdown {
  margin-top: 8px;
  font-size: 12px;
  color: #a1a1aa;
  line-height: 1.5;
}

.card-markdown p {
  margin: 4px 0;
}

.card-markdown h1,
.card-markdown h2,
.card-markdown h3,
.card-markdown h4,
.card-markdown h5,
.card-markdown h6 {
  color: #e4e4e7;
  margin: 8px 0 4px;
  font-weight: 600;
}

.card-markdown h1 { font-size: 16px; }
.card-markdown h2 { font-size: 14px; }
.card-markdown h3 { font-size: 13px; }
.card-markdown h4,
.card-markdown h5,
.card-markdown h6 { font-size: 12px; }

.card-markdown ul,
.card-markdown ol {
  margin: 4px 0;
  padding-left: 20px;
}

.card-markdown li {
  margin: 2px 0;
}

.card-markdown code {
  background: rgba(0, 0, 0, 0.3);
  padding: 1px 4px;
  border-radius: 3px;
  font-family: 'SF Mono', Monaco, Consolas, monospace;
  font-size: 11px;
}

.card-markdown pre {
  background: rgba(0, 0, 0, 0.3);
  padding: 8px;
  border-radius: 6px;
  overflow-x: auto;
  margin: 6px 0;
}

.card-markdown pre code {
  background: none;
  padding: 0;
}

.card-markdown blockquote {
  border-left: 3px solid rgba(99, 102, 241, 0.5);
  margin: 6px 0;
  padding-left: 10px;
  color: #71717a;
}

.card-markdown a {
  color: #6366f1;
  text-decoration: none;
}

.card-markdown a:hover {
  text-decoration: underline;
}

.card-markdown strong {
  color: #e4e4e7;
  font-weight: 600;
}

.card-markdown em {
  font-style: italic;
}

.card-markdown hr {
  border: none;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  margin: 8px 0;
}

.markdown-line {
  margin: 0;
}

.markdown-line p {
  margin: 2px 0;
}

/* Card Tags Container */
.card-tags {
  display: flex;
  gap: 4px;
  flex-wrap: wrap;
}

.card-subtag {
  font-size: 10px;
  font-weight: 600;
  padding: 3px 8px;
  border-radius: 4px;
  color: #fff;
}

.card-priority-badge {
  font-size: 9px;
  font-weight: 700;
  padding: 2px 6px;
  border-radius: 3px;
  color: #fff;
  opacity: 0.85;
}

/* Archive Button */
.card-archive {
  background: none;
  border: none;
  color: #71717a;
  cursor: pointer;
  font-size: 14px;
  line-height: 1;
  padding: 4px;
  border-radius: 4px;
  transition: all 0.15s ease;
}

.card-archive:hover {
  color: #fbbf24;
  background: rgba(251, 191, 36, 0.1);
}

/* Archive Section */
.archive-section {
  margin: 20px;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 12px;
  overflow: hidden;
}

.archive-header {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 14px 16px;
  cursor: pointer;
  transition: background 0.15s ease;
}

.archive-header:hover {
  background: rgba(255, 255, 255, 0.03);
}

.archive-header h3 {
  font-size: 14px;
  font-weight: 600;
  color: #a1a1aa;
}

.archive-toggle {
  color: #71717a;
  font-size: 10px;
}

.archive-content {
  border-top: 1px solid rgba(255, 255, 255, 0.06);
  padding: 8px;
}

/* Archive Search & Filter */
.archive-search-bar {
  padding: 8px 8px 12px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.archive-search-input {
  width: 100%;
  padding: 8px 12px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 6px;
  color: #e4e4e7;
  font-size: 13px;
  outline: none;
  transition: border-color 0.15s ease;
  box-sizing: border-box;
}

.archive-search-input:focus {
  border-color: rgba(255, 255, 255, 0.25);
}

.archive-search-input::placeholder {
  color: #71717a;
}

.archive-filter-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}

.archive-filter-tag {
  font-size: 11px;
  font-weight: 600;
  padding: 3px 10px;
  border-radius: 4px;
  border: 1px solid;
  cursor: pointer;
  transition: all 0.15s ease;
}

.archive-filter-tag:hover {
  opacity: 0.85;
}

.archive-empty {
  padding: 16px;
  text-align: center;
  color: #71717a;
  font-size: 13px;
}

.archive-flat-results {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.archive-results-count {
  padding: 4px 12px;
  font-size: 12px;
  color: #71717a;
}

/* Archive Year Group */
.archive-year-group {
  margin-bottom: 4px;
}

.archive-year-group:last-child {
  margin-bottom: 0;
}

.archive-year-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  cursor: pointer;
  border-radius: 8px;
  transition: background 0.15s ease;
}

.archive-year-header:hover {
  background: rgba(255, 255, 255, 0.03);
}

.archive-year-label {
  font-size: 13px;
  font-weight: 700;
  color: #a1a1aa;
}

.archive-year-content {
  padding-left: 12px;
}

.archive-group {
  margin-bottom: 4px;
}

.archive-group:last-child {
  margin-bottom: 0;
}

.archive-group-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  cursor: pointer;
  border-radius: 8px;
  transition: background 0.15s ease;
}

.archive-group-header:hover {
  background: rgba(255, 255, 255, 0.03);
}

.archive-group-tag {
  font-size: 11px;
  font-weight: 600;
  padding: 3px 10px;
  border-radius: 4px;
  color: #fff;
}

.archive-group-count {
  color: #71717a;
  font-size: 12px;
}

.archive-group-cards {
  padding: 8px 8px 8px 24px;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.archive-card {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 12px;
  background: rgba(255, 255, 255, 0.03);
  border-radius: 6px;
  transition: background 0.15s ease;
}

.archive-card:hover {
  background: rgba(255, 255, 255, 0.06);
}

.archive-card-info {
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 1;
  min-width: 0;
}

.archive-card-title {
  font-size: 13px;
  color: #e4e4e7;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.archive-card-date {
  font-size: 11px;
  color: #71717a;
  flex-shrink: 0;
}

.archive-card-actions {
  display: flex;
  gap: 4px;
}

.archive-restore-btn,
.archive-delete-btn {
  background: none;
  border: none;
  color: #71717a;
  cursor: pointer;
  font-size: 14px;
  padding: 4px 6px;
  border-radius: 4px;
  transition: all 0.15s ease;
}

.archive-restore-btn:hover {
  color: #22c55e;
  background: rgba(34, 197, 94, 0.1);
}

.archive-delete-btn:hover {
  color: #ef4444;
  background: rgba(239, 68, 68, 0.1);
}


.archive-card-clickable {
  cursor: pointer;
}

/* アーカイブ詳細ビューア */
.archive-viewer-modal {
  max-width: 480px;
  width: 90%;
}

.archive-viewer-body {
  padding: 16px 20px 20px;
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.archive-viewer-title {
  font-size: 17px;
  font-weight: 600;
  color: #f4f4f5;
  line-height: 1.4;
}

.archive-viewer-subtags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.archive-viewer-subtag {
  font-size: 11px;
  font-weight: 600;
  padding: 3px 10px;
  border-radius: 4px;
  color: #fff;
}

.archive-viewer-section {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.archive-viewer-label {
  font-size: 11px;
  font-weight: 600;
  color: #71717a;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.archive-viewer-text {
  font-size: 13px;
  color: #d4d4d8;
  line-height: 1.6;
  white-space: pre-wrap;
  word-break: break-word;
  background: rgba(255, 255, 255, 0.03);
  padding: 10px 12px;
  border-radius: 6px;
  border: 1px solid rgba(255, 255, 255, 0.06);
}

.archive-viewer-meta {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding-top: 8px;
  border-top: 1px solid rgba(255, 255, 255, 0.06);
}

.archive-viewer-meta-row {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 12px;
  color: #a1a1aa;
}

.archive-viewer-meta-label {
  font-weight: 600;
  color: #71717a;
  min-width: 70px;
}

/* ライトテーマ: アーカイブビューア */
.theme-light .archive-viewer-title {
  color: #0f172a;
}

.theme-light .archive-viewer-label {
  color: #64748b;
}

.theme-light .archive-viewer-text {
  color: #334155;
  background: #f8fafc;
  border-color: #e2e8f0;
}

.theme-light .archive-viewer-meta {
  border-top-color: #e2e8f0;
}

.theme-light .archive-viewer-meta-row {
  color: #475569;
}

.theme-light .archive-viewer-meta-label {
  color: #64748b;
}

.theme-light .archive-search-input {
  background: #f1f5f9;
  border-color: #e2e8f0;
  color: #0f172a;
}

.theme-light .archive-search-input:focus {
  border-color: #94a3b8;
}

.theme-light .archive-search-input::placeholder {
  color: #94a3b8;
}

.theme-light .archive-year-label {
  color: #475569;
}

.theme-light .archive-empty {
  color: #94a3b8;
}

.theme-light .archive-results-count {
  color: #64748b;
}
/* バックアップセクション */
.backup-info {
  color: #a1a1aa;
  font-size: 13px;
  margin: 0;
  padding: 8px 12px;
  background: rgba(255, 255, 255, 0.03);
  border-radius: 6px;
  border: 1px solid rgba(255, 255, 255, 0.06);
}

.backup-buttons {
  display: flex;
  gap: 8px;
}

.backup-buttons .btn-secondary {
  flex: 1;
}

/* 復元プロンプトモーダル */
.restore-prompt-modal {
  max-width: 400px;
}

.restore-prompt-content {
  padding: 16px 0;
}

.restore-prompt-content p {
  margin: 0 0 8px 0;
  color: #a1a1aa;
  font-size: 14px;
}

.restore-prompt-content .restore-warning {
  color: #fbbf24;
  margin-top: 16px;
  padding: 12px;
  background: rgba(251, 191, 36, 0.1);
  border-radius: 6px;
  border: 1px solid rgba(251, 191, 36, 0.2);
}

/* Subtag Management Styles */
.subtag-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.subtag-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 8px;
  flex-wrap: wrap;
}

.subtag-item.default {
  opacity: 0.7;
}

.subtag-color {
  width: 16px;
  height: 16px;
  border-radius: 4px;
  flex-shrink: 0;
}

.subtag-name {
  color: #e4e4e7;
  font-size: 13px;
  flex: 1;
}

.subtag-edit-name {
  flex: 1;
  min-width: 100px;
  padding: 6px 10px;
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 6px;
  color: #fff;
  font-size: 13px;
}

.subtag-edit-name:focus {
  outline: none;
  border-color: rgba(99, 102, 241, 0.5);
}

.subtag-action-btn {
  padding: 4px 10px;
  background: none;
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 4px;
  color: #a1a1aa;
  font-size: 11px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.subtag-action-btn:hover {
  background: rgba(255, 255, 255, 0.05);
  color: #fff;
}

.subtag-action-btn.edit:hover {
  border-color: rgba(99, 102, 241, 0.5);
  color: #a78bfa;
}

.subtag-action-btn.delete:hover {
  border-color: rgba(239, 68, 68, 0.5);
  color: #ef4444;
}

.subtag-action-btn.done {
  background: rgba(34, 197, 94, 0.15);
  border-color: rgba(34, 197, 94, 0.3);
  color: #22c55e;
}

.subtag-action-btn.done:hover {
  background: rgba(34, 197, 94, 0.25);
}

.subtag-action-btn.reset {
  background: rgba(251, 191, 36, 0.15);
  border-color: rgba(251, 191, 36, 0.3);
  color: #fbbf24;
}

.subtag-action-btn.reset:hover {
  background: rgba(251, 191, 36, 0.25);
}

.subtag-action-btn.restore {
  background: rgba(59, 130, 246, 0.15);
  border-color: rgba(59, 130, 246, 0.3);
  color: #3b82f6;
}

.subtag-action-btn.restore:hover {
  background: rgba(59, 130, 246, 0.25);
}

.subtag-modified {
  font-size: 11px;
  color: #fbbf24;
  opacity: 0.8;
}

.subtag-item.hidden {
  opacity: 0.5;
}

.hidden-subtags {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.hidden-subtags label {
  font-size: 12px;
  color: #71717a;
  margin-bottom: 8px;
  display: block;
}

/* Color Picker Inline */
.color-picker-inline {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  padding: 4px 0;
}

.color-option {
  width: 20px;
  height: 20px;
  border-radius: 4px;
  border: 2px solid transparent;
  cursor: pointer;
  transition: all 0.15s ease;
}

.color-option:hover {
  transform: scale(1.1);
}

.color-option.selected {
  border-color: #fff;
  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.3);
}

/* Custom Color Picker Input */
.color-custom-input {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  border-radius: 4px;
  border: 2px dashed rgba(255, 255, 255, 0.3);
  cursor: pointer;
  position: relative;
  color: rgba(255, 255, 255, 0.5);
  transition: all 0.15s ease;
  flex-shrink: 0;
}
.color-custom-input:hover {
  border-color: rgba(255, 255, 255, 0.6);
  color: rgba(255, 255, 255, 0.8);
  transform: scale(1.1);
}
.color-custom-input.round {
  border-radius: 50%;
  width: 16px;
  height: 16px;
}
.color-custom-input input[type="color"] {
  position: absolute;
  width: 100%;
  height: 100%;
  opacity: 0;
  cursor: pointer;
  border: none;
  padding: 0;
}

/* Add Subtag Form */
.add-subtag-form {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.add-subtag-form input[type="text"] {
  padding: 10px 14px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  color: #fff;
  font-size: 14px;
}

.add-subtag-form input[type="text"]:focus {
  outline: none;
  border-color: rgba(99, 102, 241, 0.5);
}

.add-subtag-form input[type="text"]::placeholder {
  color: #52525b;
}

.btn-add-subtag {
  padding: 10px 20px;
  background: rgba(34, 197, 94, 0.15);
  border: 1px solid rgba(34, 197, 94, 0.3);
  border-radius: 8px;
  color: #22c55e;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
  align-self: flex-start;
}

.btn-add-subtag:hover:not(:disabled) {
  background: rgba(34, 197, 94, 0.25);
  border-color: rgba(34, 197, 94, 0.5);
}

.btn-add-subtag:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Inline Add Subtag (in Edit Modal) */
.add-subtag-btn {
  border-style: dashed !important;
  color: #71717a !important;
}

.add-subtag-btn:hover {
  color: #22c55e !important;
  border-color: rgba(34, 197, 94, 0.5) !important;
}

.inline-add-subtag {
  margin-top: 12px;
  padding: 12px;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 8px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.inline-add-subtag input[type="text"] {
  padding: 8px 12px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 6px;
  color: #fff;
  font-size: 13px;
}

.inline-add-subtag input[type="text"]:focus {
  outline: none;
  border-color: rgba(99, 102, 241, 0.5);
}

.btn-add-inline {
  padding: 8px 16px;
  background: rgba(34, 197, 94, 0.15);
  border: 1px solid rgba(34, 197, 94, 0.3);
  border-radius: 6px;
  color: #22c55e;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
  align-self: flex-start;
}

.btn-add-inline:hover:not(:disabled) {
  background: rgba(34, 197, 94, 0.25);
  border-color: rgba(34, 197, 94, 0.5);
}

.btn-add-inline:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Grid Arrange Modal */
.grid-modal {
  max-width: 480px;
  max-height: 85vh;
}

.grid-modal-content {
  overflow-y: auto;
  flex: 1;
  min-height: 0;
  padding: 8px 0;
}

.grid-section {
  margin-bottom: 20px;
}

.grid-section h3 {
  font-size: 13px;
  font-weight: 600;
  color: #a1a1aa;
  margin: 0 0 12px 0;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.grid-options {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.grid-option {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.grid-option:hover {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(255, 255, 255, 0.12);
}

.grid-option.selected {
  background: rgba(139, 92, 246, 0.1);
  border-color: rgba(139, 92, 246, 0.4);
}

.grid-option input[type="radio"] {
  accent-color: #a78bfa;
}

.option-content {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.option-title {
  font-size: 14px;
  font-weight: 500;
  color: #e4e4e7;
}

.option-desc {
  font-size: 12px;
  color: #71717a;
}

.main-badge {
  display: inline-block;
  margin-left: 8px;
  padding: 2px 6px;
  background: rgba(34, 197, 94, 0.15);
  border-radius: 4px;
  font-size: 10px;
  color: #22c55e;
  font-weight: 500;
}

.custom-grid-inputs {
  margin-top: 16px;
  padding: 16px;
  background: rgba(255, 255, 255, 0.03);
  border-radius: 8px;
}

.grid-input-group {
  margin-bottom: 12px;
}

.grid-input-group label {
  display: block;
  font-size: 12px;
  color: #71717a;
  margin-bottom: 8px;
}

.grid-input-row {
  display: flex;
  align-items: center;
  gap: 10px;
}

.grid-input-buttons {
  display: flex;
  gap: 8px;
  flex: 1;
}

.grid-number-input {
  width: 56px;
  padding: 8px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 6px;
  color: #e4e4e7;
  font-size: 14px;
  font-weight: 500;
  text-align: center;
  outline: none;
  transition: border-color 0.15s ease;
  -moz-appearance: textfield;
}

.grid-number-input::-webkit-inner-spin-button,
.grid-number-input::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

.grid-number-input:focus {
  border-color: rgba(139, 92, 246, 0.5);
}

.grid-size-btn {
  flex: 1;
  padding: 8px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 6px;
  color: #a1a1aa;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.grid-size-btn:hover {
  background: rgba(255, 255, 255, 0.08);
  border-color: rgba(255, 255, 255, 0.15);
}

.grid-size-btn.active {
  background: rgba(139, 92, 246, 0.2);
  border-color: rgba(139, 92, 246, 0.5);
  color: #a78bfa;
}

.grid-preview {
  margin-top: 12px;
  text-align: center;
  font-size: 13px;
  color: #71717a;
}

.grid-preview-visual {
  margin-top: 10px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 3px;
}

.grid-preview-row {
  display: flex;
  gap: 3px;
  align-items: center;
}

.grid-preview-cell {
  width: 28px;
  height: 18px;
  border-radius: 3px;
  background: rgba(139, 92, 246, 0.15);
  border: 1px solid rgba(139, 92, 246, 0.3);
}

.grid-preview-cell-empty {
  background: rgba(255, 255, 255, 0.02);
  border-color: rgba(255, 255, 255, 0.06);
  border-style: dashed;
}

.grid-preview-ellipsis {
  font-size: 11px;
  color: #71717a;
  padding: 0 4px;
}

/* プラグインプリセットグリッドリスト */
.preset-grid-list {
  margin-top: 16px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.preset-grid-btn {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  padding: 12px 16px;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.15s ease;
  text-align: left;
}

.preset-grid-btn:hover {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(255, 255, 255, 0.2);
}

.preset-grid-btn.active {
  background: rgba(59, 130, 246, 0.15);
  border-color: #3b82f6;
}

.preset-grid-btn .preset-name {
  font-size: 14px;
  font-weight: 500;
  color: #e4e4e7;
}

.preset-grid-btn .preset-size {
  font-size: 12px;
  color: #71717a;
  margin-top: 2px;
}

.preset-grid-btn .preset-desc {
  font-size: 12px;
  color: #52525b;
  margin-top: 4px;
}

.preset-grid-btn.active .preset-name {
  color: #60a5fa;
}

.preset-grid-btn.active .preset-size {
  color: #93c5fd;
}

.grid-result {
  padding: 12px 16px;
  border-radius: 8px;
  text-align: center;
  font-size: 14px;
  font-weight: 500;
}

.grid-result.success {
  background: rgba(34, 197, 94, 0.1);
  border: 1px solid rgba(34, 197, 94, 0.3);
  color: #22c55e;
}

.grid-result.error {
  background: rgba(239, 68, 68, 0.1);
  border: 1px solid rgba(239, 68, 68, 0.3);
  color: #ef4444;
}

/* =====================================================
   プラグイン管理スタイル
   ===================================================== */

/* 設定タブ */
.settings-tabs {
  display: flex;
  gap: 4px;
  padding: 0 24px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.settings-tab {
  padding: 12px 20px;
  background: transparent;
  border: none;
  border-bottom: 2px solid transparent;
  color: #a1a1aa;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.settings-tab:hover {
  color: #fff;
}

.settings-tab.active {
  color: #a78bfa;
  border-bottom-color: #a78bfa;
}

/* 設定サブタブ */
.settings-subtabs {
  display: flex;
  gap: 4px;
  padding: 12px 24px 0;
  margin-bottom: 8px;
}

.settings-subtab {
  padding: 6px 14px;
  background: transparent;
  border: none;
  border-radius: 6px;
  color: #71717a;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.settings-subtab:hover {
  background: rgba(255, 255, 255, 0.05);
  color: #a1a1aa;
}

.settings-subtab.active {
  background: rgba(167, 139, 250, 0.15);
  color: #a78bfa;
}

/* プラグインインストールフォーム */
.plugin-install-form {
  display: flex;
  gap: 8px;
}

.plugin-install-input {
  flex: 1;
  padding: 12px 14px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  color: #fff;
  font-size: 14px;
}

.plugin-install-input::placeholder {
  color: #52525b;
}

.plugin-install-input:focus {
  outline: none;
  border-color: rgba(139, 92, 246, 0.5);
}

.btn-install {
  padding: 12px 20px;
  background: rgba(34, 197, 94, 0.15);
  border: 1px solid rgba(34, 197, 94, 0.3);
  border-radius: 8px;
  color: #22c55e;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
  white-space: nowrap;
}

.btn-install:hover:not(:disabled) {
  background: rgba(34, 197, 94, 0.25);
}

.btn-install:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* プラグインメッセージ */
.plugin-message {
  margin-top: 12px;
  padding: 10px 14px;
  border-radius: 6px;
  font-size: 13px;
}

.plugin-message.error {
  background: rgba(239, 68, 68, 0.1);
  border: 1px solid rgba(239, 68, 68, 0.3);
  color: #ef4444;
}

.plugin-message.success {
  background: rgba(34, 197, 94, 0.1);
  border: 1px solid rgba(34, 197, 94, 0.3);
  color: #22c55e;
}

/* プラグイン空状態 */
.plugins-empty {
  text-align: center;
  padding: 40px 20px;
  color: #71717a;
}

.plugins-empty-icon {
  font-size: 48px;
  margin-bottom: 16px;
  opacity: 0.5;
}

.plugins-empty-text {
  font-size: 14px;
  line-height: 1.6;
}

/* プラグインリスト */
.plugin-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* プラグインカード */
.plugin-card {
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 16px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 10px;
}

.plugin-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
}

.plugin-info {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.plugin-name {
  font-size: 15px;
  font-weight: 600;
  color: #f4f4f5;
}

.plugin-version {
  display: inline-block;
  margin-left: 8px;
  padding: 2px 8px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 4px;
  font-size: 11px;
  font-weight: 400;
  color: #71717a;
}

.plugin-author {
  font-size: 12px;
  color: #a1a1aa;
}

.plugin-description {
  font-size: 13px;
  color: #a1a1aa;
  line-height: 1.5;
  margin: 0;
}

.plugin-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 4px;
}

.plugin-type {
  font-size: 11px;
  color: #71717a;
  padding: 2px 8px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

.plugin-update-badge {
  display: inline-block;
  margin-left: 6px;
  padding: 2px 6px;
  background: linear-gradient(135deg, #22c55e, #16a34a);
  border-radius: 4px;
  font-size: 10px;
  font-weight: 600;
  color: #fff;
  animation: pulse-update 2s infinite;
}

@keyframes pulse-update {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

.plugin-footer-actions {
  display: flex;
  gap: 8px;
  align-items: center;
}

.btn-update-plugin {
  padding: 4px 12px;
  font-size: 12px;
  font-weight: 500;
  color: #fff;
  background: linear-gradient(135deg, #22c55e, #16a34a);
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.btn-update-plugin:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(34, 197, 94, 0.4);
}

.btn-update-plugin:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.plugin-actions {
  display: flex;
  gap: 8px;
  align-items: center;
}

/* トグルスイッチ */
.toggle-switch {
  position: relative;
  width: 44px;
  height: 24px;
  background: rgba(255, 255, 255, 0.1);
  border: none;
  border-radius: 12px;
  cursor: pointer;
  transition: background 0.2s ease;
}

.toggle-switch.enabled {
  background: rgba(34, 197, 94, 0.4);
}

.toggle-switch-knob {
  position: absolute;
  top: 2px;
  left: 2px;
  width: 20px;
  height: 20px;
  background: #fff;
  border-radius: 50%;
  transition: transform 0.2s ease;
}

.toggle-switch.enabled .toggle-switch-knob {
  transform: translateX(20px);
}

/* アンインストールボタン */
.btn-uninstall {
  padding: 6px 12px;
  background: transparent;
  border: 1px solid rgba(239, 68, 68, 0.3);
  border-radius: 6px;
  color: #ef4444;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.btn-uninstall:hover {
  background: rgba(239, 68, 68, 0.1);
}

/* =====================================================
   再リンクモーダル
   ===================================================== */

.relink-modal {
  max-width: 500px;
  max-height: 85vh;
  display: flex;
  flex-direction: column;
}

.relink-message {
  padding: 16px 24px;
  background: rgba(251, 191, 36, 0.1);
  border-bottom: 1px solid rgba(251, 191, 36, 0.2);
}

.relink-message p {
  margin: 0 0 8px 0;
  color: #fbbf24;
  font-size: 14px;
}

.relink-message p:last-child {
  margin-bottom: 0;
}

.relink-old-info {
  font-size: 13px !important;
  color: #a1a1aa !important;
}

.relink-old-id {
  font-family: 'SF Mono', Monaco, Consolas, monospace;
  font-size: 11px;
  color: #71717a;
}

.relink-tabs {
  display: flex;
  gap: 4px;
  padding: 12px 24px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.relink-tab {
  padding: 8px 16px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 6px;
  color: #a1a1aa;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.relink-tab:hover {
  background: rgba(255, 255, 255, 0.1);
  color: #fff;
}

.relink-tab.active {
  background: rgba(99, 102, 241, 0.2);
  border-color: rgba(99, 102, 241, 0.5);
  color: #a78bfa;
}

.relink-content {
  flex: 1;
  overflow-y: auto;
  padding: 16px 24px;
  min-height: 200px;
  max-height: 300px;
}

.relink-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.relink-empty {
  text-align: center;
  padding: 40px 20px;
  color: #71717a;
  font-size: 14px;
}

.relink-item {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 12px 14px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  cursor: pointer;
  text-align: left;
  transition: all 0.15s ease;
}

.relink-item:hover {
  background: rgba(34, 197, 94, 0.1);
  border-color: rgba(34, 197, 94, 0.3);
}

.relink-item-history:hover {
  background: rgba(99, 102, 241, 0.1);
  border-color: rgba(99, 102, 241, 0.3);
}

.relink-item-name {
  font-size: 14px;
  font-weight: 500;
  color: #f4f4f5;
}

.relink-item-id {
  font-size: 11px;
  color: #71717a;
  font-family: 'SF Mono', Monaco, Consolas, monospace;
}

.relink-item-preview {
  font-size: 11px;
  color: #22c55e;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.relink-item-card {
  font-size: 11px;
  color: #a1a1aa;
}

.relink-item-date {
  font-size: 10px;
  color: #52525b;
}

.relink-actions {
  display: flex;
  gap: 12px;
  padding: 16px 24px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.btn-relink-new {
  flex: 1;
  padding: 12px 16px;
  background: rgba(34, 197, 94, 0.15);
  border: 1px solid rgba(34, 197, 94, 0.3);
  border-radius: 8px;
  color: #22c55e;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.btn-relink-new:hover:not(:disabled) {
  background: rgba(34, 197, 94, 0.25);
  border-color: rgba(34, 197, 94, 0.5);
}

.btn-relink-new:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.btn-relink-unlink {
  padding: 12px 16px;
  background: rgba(239, 68, 68, 0.15);
  border: 1px solid rgba(239, 68, 68, 0.3);
  border-radius: 8px;
  color: #ef4444;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.btn-relink-unlink:hover {
  background: rgba(239, 68, 68, 0.25);
  border-color: rgba(239, 68, 68, 0.5);
}

/* Version Info */
.version-info {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 16px;
  margin-top: 16px;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 8px;
}

.version-info-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.version-current {
  display: flex;
  align-items: center;
  gap: 10px;
}

.version-label {
  font-size: 13px;
  font-weight: 500;
  color: #a1a1aa;
}

.version-number {
  font-size: 13px;
  font-weight: 600;
  color: #fff;
  background: rgba(99, 102, 241, 0.2);
  padding: 2px 8px;
  border-radius: 4px;
}

.version-actions {
  display: flex;
  align-items: center;
  gap: 10px;
}

.btn-check-update {
  padding: 6px 14px;
  background: rgba(99, 102, 241, 0.15);
  border: 1px solid rgba(99, 102, 241, 0.3);
  border-radius: 6px;
  color: #818cf8;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.btn-check-update:hover:not(:disabled) {
  background: rgba(99, 102, 241, 0.25);
  border-color: rgba(99, 102, 241, 0.5);
  color: #a5b4fc;
}

.btn-check-update:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.btn-download-update {
  padding: 6px 14px;
  background: rgba(34, 197, 94, 0.15);
  border: 1px solid rgba(34, 197, 94, 0.3);
  border-radius: 6px;
  color: #22c55e;
  font-size: 12px;
  font-weight: 500;
  text-decoration: none;
  transition: all 0.15s ease;
}

.btn-download-update:hover {
  background: rgba(34, 197, 94, 0.25);
  border-color: rgba(34, 197, 94, 0.5);
}

.update-status-latest {
  font-size: 12px;
  font-weight: 500;
  color: #22c55e;
  display: flex;
  align-items: center;
  gap: 4px;
}

.update-status-latest::before {
  content: '✓';
}

.update-status-checking {
  font-size: 12px;
  font-weight: 500;
  color: #818cf8;
}

.update-status-error {
  font-size: 12px;
  color: #ef4444;
  max-width: 200px;
  text-align: right;
}

/* Update Progress Bar */
.update-progress {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 8px;
}

.update-progress-bar {
  width: 100%;
  height: 8px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 4px;
  overflow: hidden;
}

.update-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #6366f1, #818cf8);
  border-radius: 4px;
  transition: width 0.2s ease;
}

.update-progress-text {
  font-size: 11px;
  color: #a1a1aa;
  text-align: center;
}

/* Update Downloaded */
.update-downloaded {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-top: 8px;
  padding: 12px;
  background: rgba(34, 197, 94, 0.1);
  border: 1px solid rgba(34, 197, 94, 0.2);
  border-radius: 8px;
}

.update-downloaded-text {
  font-size: 13px;
  font-weight: 600;
  color: #22c55e;
  margin: 0;
}

.update-downloaded-actions {
  display: flex;
  gap: 8px;
}

.btn-install-update {
  flex: 1;
  padding: 8px 16px;
  background: #22c55e;
  border: none;
  border-radius: 6px;
  color: #fff;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s ease;
}

.btn-install-update:hover {
  background: #16a34a;
}

.btn-cleanup {
  padding: 8px 16px;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 6px;
  color: #a1a1aa;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.btn-cleanup:hover {
  background: rgba(255, 255, 255, 0.15);
  color: #fff;
}

.update-hint {
  font-size: 11px;
  color: #71717a;
  margin: 0;
  line-height: 1.5;
}

/* Update Installing */
.update-installing {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 8px;
  padding: 12px;
  background: rgba(99, 102, 241, 0.1);
  border: 1px solid rgba(99, 102, 241, 0.2);
  border-radius: 8px;
}

.update-installing-text {
  font-size: 13px;
  font-weight: 600;
  color: #818cf8;
  margin: 0;
}

/* Update Installed */
.update-installed {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  margin-top: 8px;
  padding: 16px;
  background: rgba(34, 197, 94, 0.1);
  border: 1px solid rgba(34, 197, 94, 0.2);
  border-radius: 8px;
}

.update-installed-text {
  font-size: 14px;
  font-weight: 600;
  color: #22c55e;
  margin: 0;
}

.btn-restart-update {
  padding: 10px 24px;
  background: #22c55e;
  border: none;
  border-radius: 6px;
  color: #fff;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s ease;
}

.btn-restart-update:hover {
  background: #16a34a;
  transform: translateY(-1px);
}

/* Light theme overrides for update */
.theme-light .update-progress-bar {
  background: #e2e8f0;
}

.theme-light .update-progress-text {
  color: #64748b;
}

.theme-light .update-downloaded {
  background: rgba(34, 197, 94, 0.08);
  border-color: rgba(34, 197, 94, 0.2);
}

.theme-light .btn-cleanup {
  background: #f1f5f9;
  border-color: #e2e8f0;
  color: #64748b;
}

.theme-light .btn-cleanup:hover {
  background: #e2e8f0;
  color: #334155;
}

.theme-light .update-hint {
  color: #64748b;
}

.theme-light .update-installing {
  background: rgba(99, 102, 241, 0.08);
  border-color: rgba(99, 102, 241, 0.2);
}

.theme-light .update-status-checking {
  color: #6366f1;
}

/* Theme Selector */
.theme-selector {
  display: flex;
  gap: 8px;
}

.theme-option {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 10px 16px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  color: #a1a1aa;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.theme-option:hover {
  background: rgba(255, 255, 255, 0.08);
  border-color: rgba(255, 255, 255, 0.2);
}

.theme-option.active {
  background: rgba(99, 102, 241, 0.15);
  border-color: rgba(99, 102, 241, 0.5);
  color: #fff;
}

/* Theme Toggle Button */
.theme-toggle {
  position: fixed;
  top: 10px;
  right: 60px;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border: none;
  background: rgba(255, 255, 255, 0.1);
  color: #fbbf24;
  font-size: 18px;
  cursor: pointer;
  transition: all 0.2s ease;
  z-index: 1001;
  display: flex;
  align-items: center;
  justify-content: center;
  -webkit-app-region: no-drag;
}

.theme-toggle:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: scale(1.1);
}

.theme-light .theme-toggle {
  background: rgba(0, 0, 0, 0.08);
  color: #f59e0b;
}

.theme-light .theme-toggle:hover {
  background: rgba(0, 0, 0, 0.12);
}

/* Light Theme — Paper-like */
body.theme-light {
  background: #f5f3ef;
  color: #1a1a1a;
}

.theme-light .board-container {
  background: transparent;
}

/* ライトテーマ - フローティングナビゲーション */
.theme-light .floating-nav {
  background: rgba(255, 253, 250, 0.95);
  border-color: rgba(0, 0, 0, 0.1);
  box-shadow:
    0 1px 4px rgba(0, 0, 0, 0.08),
    0 4px 16px rgba(0, 0, 0, 0.05);
}

.theme-light .nav-brand {
  background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%);
}

.theme-light .brand-icon {
  color: #7c3aed;
}

.theme-light .nav-tabs {
  background: rgba(0, 0, 0, 0.03);
}

.theme-light .nav-tab {
  color: rgba(0, 0, 0, 0.5);
}

.theme-light .nav-tab:hover {
  color: rgba(0, 0, 0, 0.8);
  background: rgba(0, 0, 0, 0.04);
}

.theme-light .nav-tab.active {
  color: #1a1a1a;
  background: #fff;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.08);
}

/* 動的タブのため first/last-child は使わない */
.theme-light .nav-tab.active.UNUSED-first-child {
  background: linear-gradient(135deg, rgba(22, 163, 74, 0.15) 0%, rgba(22, 163, 74, 0.08) 100%);
  color: #16a34a;
}

.theme-light .nav-tab.active.UNUSED-last-child {
  background: linear-gradient(135deg, rgba(37, 99, 235, 0.15) 0%, rgba(37, 99, 235, 0.08) 100%);
  color: #2563eb;
}

.theme-light .nav-action {
  color: rgba(0, 0, 0, 0.45);
}

.theme-light .nav-action-term-color {
  color: rgba(109, 40, 217, 0.5);
}

.theme-light .nav-action-term-color:hover,
.theme-light .nav-action-term-color.active {
  color: rgba(109, 40, 217, 0.9);
  background: rgba(109, 40, 217, 0.08);
}

.theme-light .color-menu-dropdown {
  background: rgba(255, 255, 255, 0.98);
  border-color: rgba(0, 0, 0, 0.1);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
}

.theme-light .color-menu-item {
  color: rgba(0, 0, 0, 0.65);
}

.theme-light .color-menu-item:hover {
  background: rgba(109, 40, 217, 0.08);
  color: rgba(0, 0, 0, 0.9);
}

.theme-light .color-menu-item.color-menu-reset {
  color: rgba(100, 116, 139, 0.65);
}

.theme-light .color-menu-item.color-menu-reset:hover {
  background: rgba(100, 116, 139, 0.08);
  color: rgba(100, 116, 139, 0.9);
}

.theme-light .color-menu-divider {
  background: rgba(0, 0, 0, 0.06);
}
.theme-light .color-menu-label {
  color: rgba(0, 0, 0, 0.4);
}
.theme-light .color-preset-chip {
  border-color: rgba(0, 0, 0, 0.1);
  background: rgba(0, 0, 0, 0.03);
  color: rgba(0, 0, 0, 0.65);
}
.theme-light .color-preset-chip:hover {
  background: rgba(0, 0, 0, 0.08);
  border-color: rgba(0, 0, 0, 0.15);
  color: #000;
}

.theme-light .terminal-color-action-btn {
  background: rgba(109, 40, 217, 0.06);
  border-color: rgba(109, 40, 217, 0.15);
  color: #6d28d9;
}

.theme-light .terminal-color-action-btn:hover {
  background: rgba(109, 40, 217, 0.12);
  border-color: rgba(109, 40, 217, 0.3);
}

.theme-light .terminal-color-reset-btn {
  background: rgba(0, 0, 0, 0.03);
  border-color: rgba(0, 0, 0, 0.1);
  color: #64748b;
}

.theme-light .terminal-color-reset-btn:hover {
  background: rgba(0, 0, 0, 0.06);
  border-color: rgba(0, 0, 0, 0.15);
}

.theme-light .terminal-color-picker-input::-webkit-color-swatch {
  border-color: rgba(0, 0, 0, 0.15);
}

.theme-light .terminal-color-picker-text {
  color: #64748b;
}

.theme-light .nav-action:hover {
  color: rgba(0, 0, 0, 0.8);
  background: rgba(0, 0, 0, 0.05);
}

.theme-light .action-badge {
  color: #16a34a;
  background: rgba(22, 163, 74, 0.1);
}

.theme-light .nav-divider {
  background: rgba(0, 0, 0, 0.08);
}

.theme-light .sidebar-btn {
  color: rgba(0, 0, 0, 0.4);
}

.theme-light .sidebar-btn:hover {
  color: rgba(0, 0, 0, 0.75);
  background: rgba(0, 0, 0, 0.05);
}

.theme-light .sidebar-btn.active {
  color: #7c3aed;
  background: rgba(124, 58, 237, 0.1);
}

.theme-light .brand-name {
  color: rgba(0, 0, 0, 0.75);
}

.theme-light .theme-slider {
  background: rgba(0, 0, 0, 0.04);
}

.theme-light .theme-slider:hover {
  background: rgba(0, 0, 0, 0.08);
}

.theme-light .column {
  background: rgba(255, 253, 250, 0.9);
  border-color: rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.06);
}

.theme-light .column-over {
  background: rgba(255, 253, 250, 0.95);
  border-color: #6366f1;
}

.theme-light .column-header {
  border-color: rgba(0, 0, 0, 0.08);
}

.theme-light .column-title {
  color: #3d3d3d;
}

.theme-light .column-todo .column-title {
  color: #555;
}

.theme-light .column-in-progress .column-title {
  color: #2558c4;
}

.theme-light .column-done .column-title {
  color: #1a8a3e;
}

.theme-light .column-count {
  background: rgba(0, 0, 0, 0.05);
  color: #555;
}

.theme-light .column-todo .column-count {
  background: rgba(0, 0, 0, 0.05);
  color: #555;
}

.theme-light .column-in-progress .column-count {
  background: rgba(37, 88, 196, 0.1);
  color: #2558c4;
}

.theme-light .column-done .column-count {
  background: rgba(26, 138, 62, 0.1);
  color: #1a8a3e;
}

.theme-light .card {
  background: #fff;
  border-color: rgba(0, 0, 0, 0.12);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.07);
}

.theme-light .card:hover {
  background: #fff;
  border-color: rgba(0, 0, 0, 0.2);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

/* ライトテーマでのカラム色カード: 背景ティントを少し濃く */
.theme-light .card.card-column-colored {
  border-color: transparent;
}

.theme-light .card-title {
  color: #1a1a1a;
}

.theme-light .card-description,
.theme-light .card-markdown {
  color: #3d3d3d;
}

.theme-light .card-markdown p,
.theme-light .card-markdown li {
  color: #3d3d3d;
}

.theme-light .card-edit,
.theme-light .card-delete,
.theme-light .card-archive,
.theme-light .card-jump-button {
  color: #555;
  background: rgba(0, 0, 0, 0.04);
  border-color: rgba(0, 0, 0, 0.08);
}

.theme-light .card-edit:hover,
.theme-light .card-delete:hover,
.theme-light .card-archive:hover,
.theme-light .card-jump-button:hover {
  background: rgba(0, 0, 0, 0.08);
  color: #1a1a1a;
}

.theme-light .card-unlink-button {
  background: rgba(234, 179, 8, 0.1);
  border-color: rgba(234, 179, 8, 0.2);
  color: #b45309;
}

.theme-light .card-unlink-button:hover {
  background: rgba(234, 179, 8, 0.2);
  border-color: rgba(234, 179, 8, 0.4);
}

.theme-light .card-close-window-button {
  background: rgba(239, 68, 68, 0.1);
  border-color: rgba(239, 68, 68, 0.2);
  color: #dc2626;
}

.theme-light .card-close-window-button:hover {
  background: rgba(239, 68, 68, 0.2);
  border-color: rgba(239, 68, 68, 0.4);
}

.theme-light .terminal-color-dot {
  border-color: rgba(0, 0, 0, 0.15);
}

/* Modal Light Theme */
.theme-light .modal-overlay {
  background: rgba(0, 0, 0, 0.25);
}

.theme-light .modal {
  background: #fffdf9;
  border-color: rgba(0, 0, 0, 0.1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
}

.theme-light .modal-header {
  border-color: rgba(0, 0, 0, 0.06);
}

.theme-light .modal-header h2 {
  color: #1a1a1a;
}

.theme-light .modal-close {
  color: #666;
}

.theme-light .modal-close:hover {
  color: #1a1a1a;
  background: rgba(0, 0, 0, 0.05);
}

/* Form Light Theme */
.theme-light .form-group label {
  color: #3d3d3d;
}

.theme-light .form-group input,
.theme-light .form-group textarea,
.theme-light .form-group select {
  background: rgba(255, 255, 255, 0.8);
  border-color: rgba(0, 0, 0, 0.12);
  color: #1a1a1a;
}

.theme-light .form-group input::placeholder,
.theme-light .form-group textarea::placeholder {
  color: #999;
}

.theme-light .form-group input:focus,
.theme-light .form-group textarea:focus,
.theme-light .form-group select:focus {
  border-color: #6366f1;
  background: #fff;
  box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.08);
}

.theme-light .form-hint {
  color: #777;
}

/* Button Light Theme */
.theme-light .btn-primary {
  background: #5b5ed6;
  color: #fff;
}

.theme-light .btn-primary:hover {
  background: #4a4dc8;
}

.theme-light .btn-secondary {
  background: rgba(0, 0, 0, 0.04);
  border-color: rgba(0, 0, 0, 0.12);
  color: #3d3d3d;
}

.theme-light .btn-secondary:hover {
  background: rgba(0, 0, 0, 0.08);
  color: #1a1a1a;
}

.theme-light .btn-browse {
  background: rgba(0, 0, 0, 0.04);
  border-color: rgba(0, 0, 0, 0.12);
  color: #3d3d3d;
}

.theme-light .btn-browse:hover {
  background: rgba(0, 0, 0, 0.08);
}

/* Settings Light Theme */
.theme-light .settings-tabs {
  border-color: rgba(0, 0, 0, 0.08);
}

.theme-light .settings-tab {
  color: #777;
}

.theme-light .settings-tab:hover {
  color: #3d3d3d;
}

.theme-light .settings-tab.active {
  color: #5b5ed6;
  border-color: #5b5ed6;
}

.theme-light .settings-subtab { color: #777; }
.theme-light .settings-subtab:hover { background: rgba(0, 0, 0, 0.04); color: #3d3d3d; }
.theme-light .settings-subtab.active { background: rgba(91, 94, 214, 0.08); color: #5b5ed6; }

.theme-light .settings-section h3 {
  color: #1a1a1a;
}

.theme-light .settings-section {
  border-color: rgba(0, 0, 0, 0.06);
}

/* Version Info Light Theme */
.theme-light .version-info {
  background: rgba(0, 0, 0, 0.02);
  border-color: rgba(0, 0, 0, 0.06);
}

.theme-light .version-label {
  color: #3d3d3d;
}

.theme-light .version-number {
  background: rgba(91, 94, 214, 0.1);
  color: #4a4dc8;
}

.theme-light .btn-check-update {
  background: rgba(91, 94, 214, 0.08);
  border-color: rgba(91, 94, 214, 0.2);
  color: #4a4dc8;
}

.theme-light .btn-check-update:hover:not(:disabled) {
  background: #c7d2fe;
}

/* Theme Selector Light */
.theme-light .theme-option {
  background: #f8fafc;
  border-color: #e2e8f0;
  color: #64748b;
}

.theme-light .theme-option:hover {
  background: #f1f5f9;
  border-color: #cbd5e1;
}

.theme-light .theme-option.active {
  background: #e0e7ff;
  border-color: #6366f1;
  color: #4338ca;
}

/* Column Actions Light Theme */
.theme-light .add-card-button,
.theme-light .add-window-button {
  background: rgba(0, 0, 0, 0.02);
  border-color: rgba(0, 0, 0, 0.08);
  color: #777;
}

.theme-light .add-card-button:hover,
.theme-light .add-window-button:hover {
  background: rgba(0, 0, 0, 0.05);
  border-color: rgba(0, 0, 0, 0.12);
  color: #3d3d3d;
}

/* Board Tabs Light Theme - 互換性用（新UIでは使用しない） */

/* Header Actions Light Theme */
.theme-light .header-actions button {
  background: rgba(0, 0, 0, 0.04);
  border-color: rgba(0, 0, 0, 0.08);
  color: #777;
}

.theme-light .header-actions button:hover {
  background: rgba(0, 0, 0, 0.08);
  color: #3d3d3d;
}

/* Dev Mode Light Theme */
.theme-light .dev-mode-indicator {
  background: #ea580c;
  color: #fff;
}

.theme-light .drag-region {
  background: transparent;
}

.theme-light .app-dev-mode .drag-region {
  background: linear-gradient(90deg, transparent 0%, rgba(234, 88, 12, 0.08) 50%, transparent 100%);
}

/* Tag Colors Light Theme */
.theme-light .card-tag {
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.theme-light .card-subtag {
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

/* Path Input Light Theme */
.theme-light .path-input-wrapper {
  background: rgba(255, 255, 255, 0.8);
  border-color: rgba(0, 0, 0, 0.12);
}

.theme-light .path-prefix {
  color: #777;
}

.theme-light .path-input {
  color: #1a1a1a;
}

/* Scrollbar Light Theme */
.theme-light ::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.03);
}

.theme-light ::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.12);
}

.theme-light ::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.2);
}

/* =====================================================
   Ideas Panel (アイデアバックログ)
   ===================================================== */

.ideas-panel {
  flex: 1;
  display: flex;
  flex-direction: column;
  padding: 20px;
  padding-top: 70px;
  max-width: 800px;
  margin: 0 auto;
  width: 100%;
}

.ideas-header {
  margin-bottom: 20px;
}

.ideas-add-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 20px;
  background: linear-gradient(135deg, rgba(34, 197, 94, 0.15), rgba(34, 197, 94, 0.08));
  border: 1px solid rgba(34, 197, 94, 0.3);
  border-radius: 10px;
  color: #22c55e;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s ease;
}

.ideas-add-btn:hover {
  background: linear-gradient(135deg, rgba(34, 197, 94, 0.25), rgba(34, 197, 94, 0.15));
  border-color: rgba(34, 197, 94, 0.5);
  transform: translateY(-1px);
}

.ideas-add-btn .add-icon {
  font-size: 18px;
  font-weight: 300;
}

.ideas-content {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.ideas-group {
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 12px;
  overflow: hidden;
}

.ideas-group-header {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 14px 16px;
  cursor: pointer;
  transition: background 0.15s ease;
}

.ideas-group-header:hover {
  background: rgba(255, 255, 255, 0.03);
}

.ideas-toggle {
  color: #71717a;
  font-size: 10px;
}

.ideas-group-tag {
  font-size: 12px;
  font-weight: 600;
  padding: 4px 12px;
  border-radius: 6px;
  color: #fff;
}

.ideas-group-count {
  color: #71717a;
  font-size: 13px;
}

.ideas-group-cards {
  padding: 8px 16px 16px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.ideas-empty-group {
  padding: 16px;
  text-align: center;
  color: #52525b;
  font-size: 13px;
}

.ideas-empty {
  text-align: center;
  padding: 60px 20px;
  color: #71717a;
}

.ideas-empty p {
  margin: 0 0 8px;
  font-size: 15px;
}

.ideas-empty-hint {
  font-size: 13px !important;
  color: #52525b !important;
}

/* Idea Card */
.idea-card {
  display: flex;
  gap: 12px;
  padding: 14px 16px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 10px;
  transition: all 0.15s ease;
}

.idea-card:hover {
  background: rgba(255, 255, 255, 0.08);
  border-color: rgba(255, 255, 255, 0.15);
}

.idea-card-content {
  flex: 1;
  min-width: 0;
}

.idea-card-title {
  font-size: 14px;
  font-weight: 600;
  color: #f4f4f5;
  margin-bottom: 4px;
}

.idea-card-description {
  font-size: 13px;
  color: #a1a1aa;
  line-height: 1.5;
  margin-bottom: 6px;
  overflow: hidden;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}

.idea-card-date {
  font-size: 11px;
  color: #52525b;
}

.idea-card-actions {
  display: flex;
  flex-direction: column;
  gap: 6px;
  flex-shrink: 0;
}

.idea-restore-btn {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 6px 10px;
  border-radius: 6px;
  font-size: 11px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
  border: 1px solid;
}

.idea-restore-btn.terminal {
  background: rgba(34, 197, 94, 0.1);
  border-color: rgba(34, 197, 94, 0.3);
  color: #22c55e;
}

.idea-restore-btn.terminal:hover {
  background: rgba(34, 197, 94, 0.2);
  border-color: rgba(34, 197, 94, 0.5);
}

.idea-restore-btn.finder {
  background: rgba(59, 130, 246, 0.1);
  border-color: rgba(59, 130, 246, 0.3);
  color: #3b82f6;
}

.idea-restore-btn.finder:hover {
  background: rgba(59, 130, 246, 0.2);
  border-color: rgba(59, 130, 246, 0.5);
}

.idea-restore-btn .restore-icon {
  font-size: 12px;
}

.idea-delete-btn {
  padding: 6px 10px;
  background: rgba(239, 68, 68, 0.08);
  border: 1px solid rgba(239, 68, 68, 0.2);
  border-radius: 6px;
  color: #ef4444;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.15s ease;
  align-self: flex-start;
}

.idea-delete-btn:hover {
  background: rgba(239, 68, 68, 0.15);
  border-color: rgba(239, 68, 68, 0.4);
}

/* Tab Badge for Ideas count */
.tab-badge {
  margin-left: 6px;
  padding: 2px 6px;
  background: rgba(251, 191, 36, 0.2);
  border-radius: 10px;
  font-size: 10px;
  font-weight: 600;
  color: #fbbf24;
}

/* Light Theme - Ideas Panel */
.theme-light .ideas-panel {
  background: transparent;
}

.theme-light .ideas-add-btn {
  background: linear-gradient(135deg, rgba(22, 163, 74, 0.12), rgba(22, 163, 74, 0.06));
  border-color: rgba(22, 163, 74, 0.25);
  color: #16a34a;
}

.theme-light .ideas-add-btn:hover {
  background: linear-gradient(135deg, rgba(22, 163, 74, 0.2), rgba(22, 163, 74, 0.1));
  border-color: rgba(22, 163, 74, 0.4);
}

.theme-light .ideas-group {
  background: rgba(255, 253, 250, 0.85);
  border-color: rgba(0, 0, 0, 0.07);
}

.theme-light .ideas-group-header:hover {
  background: rgba(0, 0, 0, 0.02);
}

.theme-light .ideas-toggle {
  color: #999;
}

.theme-light .ideas-group-count {
  color: #777;
}

.theme-light .ideas-empty-group {
  color: #999;
}

.theme-light .ideas-empty {
  color: #777;
}

.theme-light .ideas-empty-hint {
  color: #999 !important;
}

.theme-light .idea-card {
  background: rgba(255, 255, 255, 0.7);
  border-color: rgba(0, 0, 0, 0.06);
}

.theme-light .idea-card:hover {
  background: rgba(255, 255, 255, 0.9);
  border-color: rgba(0, 0, 0, 0.1);
}

.theme-light .idea-card-title {
  color: #1a1a1a;
}

.theme-light .idea-card-description {
  color: #3d3d3d;
}

.theme-light .idea-card-date {
  color: #999;
}

.theme-light .idea-restore-btn.terminal {
  background: rgba(22, 163, 74, 0.08);
  border-color: rgba(22, 163, 74, 0.2);
  color: #16a34a;
}

.theme-light .idea-restore-btn.terminal:hover {
  background: rgba(22, 163, 74, 0.15);
  border-color: rgba(22, 163, 74, 0.35);
}

.theme-light .idea-restore-btn.finder {
  background: rgba(37, 99, 235, 0.08);
  border-color: rgba(37, 99, 235, 0.2);
  color: #2563eb;
}

.theme-light .idea-restore-btn.finder:hover {
  background: rgba(37, 99, 235, 0.15);
  border-color: rgba(37, 99, 235, 0.35);
}

.theme-light .idea-delete-btn {
  background: rgba(220, 38, 38, 0.06);
  border-color: rgba(220, 38, 38, 0.15);
  color: #dc2626;
}

.theme-light .idea-delete-btn:hover {
  background: rgba(220, 38, 38, 0.12);
  border-color: rgba(220, 38, 38, 0.3);
}

.theme-light .tab-badge {
  background: rgba(245, 158, 11, 0.15);
  color: #d97706;
}

/* ===================================
   アプリタブ管理セクション (v0.7.0)
   =================================== */

.settings-description {
  font-size: 0.85rem;
  color: rgba(255, 255, 255, 0.5);
  margin-bottom: 12px;
}

.theme-light .settings-description {
  color: rgba(0, 0, 0, 0.5);
}

/* 有効なタブ一覧 */
.app-tabs-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin-bottom: 16px;
}

.app-tab-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  border-radius: 8px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.08);
  font-size: 0.9rem;
}

.theme-light .app-tab-item {
  background: rgba(0, 0, 0, 0.03);
  border-color: rgba(0, 0, 0, 0.08);
}

.app-tab-icon {
  font-size: 1.1rem;
  width: 24px;
  text-align: center;
}

.app-tab-name {
  flex: 1;
  font-weight: 500;
}

.app-tab-type {
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.35);
}

.theme-light .app-tab-type {
  color: rgba(0, 0, 0, 0.35);
}

.app-tab-remove {
  background: none;
  border: none;
  color: rgba(255, 255, 255, 0.4);
  cursor: pointer;
  font-size: 1.1rem;
  padding: 0 4px;
  border-radius: 4px;
  transition: all 0.15s;
}

.app-tab-remove:hover {
  color: #ef4444;
  background: rgba(239, 68, 68, 0.15);
}

.theme-light .app-tab-remove {
  color: rgba(0, 0, 0, 0.3);
}

/* プリセットグリッド */
.app-tabs-presets {
  margin-bottom: 16px;
}

.app-tabs-presets label {
  display: block;
  font-size: 0.85rem;
  color: rgba(255, 255, 255, 0.6);
  margin-bottom: 8px;
}

.theme-light .app-tabs-presets label {
  color: rgba(0, 0, 0, 0.6);
}

.preset-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.preset-app-btn {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 5px 10px;
  border-radius: 6px;
  border: 1px solid rgba(255, 255, 255, 0.12);
  background: rgba(255, 255, 255, 0.06);
  color: rgba(255, 255, 255, 0.8);
  cursor: pointer;
  font-size: 0.82rem;
  transition: all 0.15s;
}

.preset-app-btn:hover {
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.2);
}

.theme-light .preset-app-btn {
  border-color: rgba(0, 0, 0, 0.12);
  background: rgba(0, 0, 0, 0.04);
  color: rgba(0, 0, 0, 0.75);
}

.theme-light .preset-app-btn:hover {
  background: rgba(0, 0, 0, 0.08);
}

.preset-icon {
  font-size: 1rem;
}

.preset-name {
  font-weight: 500;
}

.preset-empty {
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.35);
  padding: 4px;
}

.theme-light .preset-empty {
  color: rgba(0, 0, 0, 0.35);
}

/* カスタムアプリ追加フォーム */
.app-tabs-custom label {
  display: block;
  font-size: 0.85rem;
  color: rgba(255, 255, 255, 0.6);
  margin-bottom: 8px;
}

.theme-light .app-tabs-custom label {
  color: rgba(0, 0, 0, 0.6);
}

.custom-app-form {
  display: flex;
  gap: 6px;
  margin-bottom: 4px;
}

.custom-app-form input {
  flex: 1;
  padding: 6px 10px;
  border-radius: 6px;
  border: 1px solid rgba(255, 255, 255, 0.12);
  background: rgba(255, 255, 255, 0.06);
  color: inherit;
  font-size: 0.85rem;
}

.theme-light .custom-app-form input {
  border-color: rgba(0, 0, 0, 0.15);
  background: rgba(0, 0, 0, 0.03);
}

.btn-add-custom-app {
  padding: 6px 14px;
  border-radius: 6px;
  border: 1px solid rgba(99, 102, 241, 0.4);
  background: rgba(99, 102, 241, 0.15);
  color: #818cf8;
  cursor: pointer;
  font-size: 0.85rem;
  font-weight: 500;
  white-space: nowrap;
  transition: all 0.15s;
}

.btn-add-custom-app:hover:not(:disabled) {
  background: rgba(99, 102, 241, 0.25);
}

.btn-add-custom-app:disabled {
  opacity: 0.4;
  cursor: default;
}

/* ============================================
   タブ閉じるボタン / 追加ボタン / ポップオーバー
   ============================================ */

/* タブの閉じるボタン */
.tab-close {
  display: none;
  margin-left: 2px;
  padding: 0 3px;
  font-size: 11px;
  line-height: 1;
  border-radius: 4px;
  color: rgba(255, 255, 255, 0.4);
  cursor: pointer;
}

.nav-tab:hover .tab-close {
  display: inline-flex;
}

.tab-close:hover {
  color: #ef4444;
  background: rgba(239, 68, 68, 0.15);
}

.theme-light .tab-close {
  color: rgba(0, 0, 0, 0.3);
}

.theme-light .tab-close:hover {
  color: #dc2626;
  background: rgba(220, 38, 38, 0.1);
}

/* タブ追加ボタンラッパー（ポップオーバーの位置基準） */
.tab-add-wrapper {
  position: relative;
}

.tab-add-btn {
  padding: 8px 10px !important;
  font-size: 14px !important;
  opacity: 0.4;
  min-width: unset;
}

.tab-add-btn .tab-icon {
  font-size: 14px;
  line-height: 1;
}

.tab-add-btn:hover {
  opacity: 1;
}

/* ポップオーバー */
.tab-add-popover {
  position: absolute;
  top: calc(100% + 8px);
  right: 0;
  width: 260px;
  max-height: 400px;
  overflow-y: auto;
  background: rgba(30, 30, 46, 0.98);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
  z-index: 1000;
  padding: 8px 0;
}

.theme-light .tab-add-popover {
  background: #fffdf9;
  border-color: rgba(0, 0, 0, 0.1);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
}

.popover-section {
  padding: 4px 0;
}

.popover-label {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 14px 6px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: rgba(255, 255, 255, 0.35);
}

.theme-light .popover-label {
  color: rgba(0, 0, 0, 0.4);
}

.popover-back {
  background: none;
  border: none;
  color: rgba(255, 255, 255, 0.5);
  cursor: pointer;
  font-size: 14px;
  padding: 0 4px;
}

.popover-back:hover {
  color: rgba(255, 255, 255, 0.9);
}

.theme-light .popover-back {
  color: rgba(0, 0, 0, 0.4);
}

.theme-light .popover-back:hover {
  color: rgba(0, 0, 0, 0.8);
}

.popover-item {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  padding: 8px 14px;
  background: none;
  border: none;
  color: rgba(255, 255, 255, 0.75);
  font-size: 13px;
  cursor: pointer;
  text-align: left;
  transition: background 0.15s;
}

.popover-item:hover {
  background: rgba(255, 255, 255, 0.08);
  color: #fff;
}

.theme-light .popover-item {
  color: rgba(0, 0, 0, 0.7);
}

.theme-light .popover-item:hover {
  background: rgba(0, 0, 0, 0.05);
  color: #000;
}

.popover-icon {
  font-size: 16px;
  width: 20px;
  text-align: center;
}

.popover-divider {
  height: 1px;
  margin: 4px 10px;
  background: rgba(255, 255, 255, 0.08);
}

.theme-light .popover-divider {
  background: rgba(0, 0, 0, 0.08);
}

.popover-custom-form {
  display: flex;
  gap: 6px;
  padding: 4px 10px 6px;
}

.popover-custom-input {
  flex: 1;
  min-width: 0;
  padding: 6px 8px;
  border-radius: 6px;
  border: 1px solid rgba(255, 255, 255, 0.12);
  background: rgba(255, 255, 255, 0.06);
  color: #e4e4e7;
  font-size: 12px;
}

.popover-custom-input:focus {
  outline: none;
  border-color: rgba(99, 102, 241, 0.5);
}

.theme-light .popover-custom-input {
  background: rgba(0, 0, 0, 0.04);
  border-color: rgba(0, 0, 0, 0.12);
  color: #1a1a2e;
}

.popover-custom-add {
  padding: 6px 10px;
  border-radius: 6px;
  border: none;
  background: rgba(99, 102, 241, 0.2);
  color: #a5b4fc;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  white-space: nowrap;
}

.popover-custom-add:hover:not(:disabled) {
  background: rgba(99, 102, 241, 0.35);
}

.popover-custom-add:disabled {
  opacity: 0.4;
  cursor: default;
}

.theme-light .popover-custom-add {
  background: rgba(99, 102, 241, 0.1);
  color: #6366f1;
}

.theme-light .popover-custom-add:hover:not(:disabled) {
  background: rgba(99, 102, 241, 0.2);
}

/* Grid Modal Light Theme */
.theme-light .grid-option {
  background: rgba(0, 0, 0, 0.02);
  border-color: #e2e8f0;
  color: #0f172a;
}

.theme-light .grid-option:hover {
  background: rgba(0, 0, 0, 0.04);
  border-color: #cbd5e1;
}

.theme-light .grid-option.selected {
  background: rgba(99, 102, 241, 0.08);
  border-color: rgba(99, 102, 241, 0.4);
}

.theme-light .grid-section h3 {
  color: #64748b;
}

.theme-light .option-title {
  color: #0f172a;
}

.theme-light .option-desc {
  color: #64748b;
}

.theme-light .grid-number-input {
  background: rgba(0, 0, 0, 0.03);
  border-color: #e2e8f0;
  color: #0f172a;
}

.theme-light .grid-number-input:focus {
  border-color: rgba(99, 102, 241, 0.5);
}

.theme-light .grid-size-btn {
  background: rgba(0, 0, 0, 0.03);
  border-color: #e2e8f0;
  color: #334155;
}

.theme-light .grid-size-btn:hover {
  background: rgba(0, 0, 0, 0.06);
  border-color: #cbd5e1;
}

.theme-light .grid-size-btn.active {
  background: rgba(99, 102, 241, 0.1);
  border-color: rgba(99, 102, 241, 0.5);
  color: #6366f1;
}

.theme-light .preset-grid-btn {
  background: rgba(0, 0, 0, 0.02);
  border-color: #e2e8f0;
}

.theme-light .preset-grid-btn:hover {
  background: rgba(0, 0, 0, 0.04);
  border-color: #cbd5e1;
}

.theme-light .preset-grid-btn.active {
  background: rgba(99, 102, 241, 0.08);
  border-color: #6366f1;
}

.theme-light .preset-grid-btn .preset-name {
  color: #0f172a;
}

.theme-light .preset-grid-btn .preset-size {
  color: #64748b;
}

.theme-light .preset-grid-btn .preset-desc {
  color: #94a3b8;
}

.theme-light .preset-grid-btn.active .preset-name {
  color: #4f46e5;
}

.theme-light .preset-grid-btn.active .preset-size {
  color: #6366f1;
}

.theme-light .main-badge {
  background: rgba(22, 163, 74, 0.1);
  color: #16a34a;
}

.theme-light .custom-grid-inputs {
  background: #f8fafc;
}

.theme-light .grid-input-group label {
  color: #64748b;
}

.theme-light .grid-preview {
  color: #64748b;
}

.theme-light .grid-preview-cell {
  background: rgba(99, 102, 241, 0.08);
  border-color: rgba(99, 102, 241, 0.25);
}

.theme-light .grid-preview-cell-empty {
  background: rgba(0, 0, 0, 0.02);
  border-color: rgba(0, 0, 0, 0.08);
}

.theme-light .grid-preview-ellipsis {
  color: #94a3b8;
}

.theme-light .grid-result.success {
  background: rgba(22, 163, 74, 0.08);
  border-color: rgba(22, 163, 74, 0.25);
  color: #16a34a;
}

.theme-light .grid-result.error {
  background: rgba(220, 38, 38, 0.08);
  border-color: rgba(220, 38, 38, 0.25);
  color: #dc2626;
}

/* Checkbox Menu Light Theme */
.theme-light .checkbox-menu-group-label {
  color: #777;
}

.theme-light .checkbox-menu-item {
  color: #3d3d3d;
}

.theme-light .checkbox-menu-item:hover {
  background: rgba(91, 94, 214, 0.08);
}

.theme-light .checkbox-menu-item.active {
  background: rgba(91, 94, 214, 0.12);
  color: #4a4dc8;
}

.theme-light .checkbox-menu-help {
  border-top-color: rgba(0, 0, 0, 0.08);
}

.theme-light .checkbox-menu-help a {
  color: #5b5ed6;
}

/* Toggle Switch Light Theme */
.theme-light .toggle-switch {
  background: rgba(0, 0, 0, 0.2);
}

.theme-light .toggle-switch.enabled {
  background: #22c55e;
}

/* Plugin / Install Light Theme */
.theme-light .plugin-install-input {
  background: rgba(255, 255, 255, 0.8);
  border-color: rgba(0, 0, 0, 0.15);
  color: #1a1a1a;
}

.theme-light .plugin-install-input::placeholder {
  color: #999;
}

.theme-light .plugin-install-input:focus {
  border-color: #5b5ed6;
  background: #fff;
  box-shadow: 0 0 0 3px rgba(91, 94, 214, 0.08);
}

.theme-light .btn-install {
  background: rgba(22, 163, 74, 0.1);
  border-color: rgba(22, 163, 74, 0.25);
  color: #16a34a;
}

.theme-light .btn-install:hover:not(:disabled) {
  background: rgba(22, 163, 74, 0.18);
}

.theme-light .btn-uninstall {
  border-color: rgba(220, 38, 38, 0.25);
  color: #dc2626;
}

.theme-light .btn-uninstall:hover {
  background: rgba(220, 38, 38, 0.08);
}

.theme-light .plugin-message.error {
  background: rgba(220, 38, 38, 0.06);
  border-color: rgba(220, 38, 38, 0.2);
  color: #dc2626;
}

.theme-light .plugin-message.success {
  background: rgba(22, 163, 74, 0.06);
  border-color: rgba(22, 163, 74, 0.2);
  color: #16a34a;
}

.theme-light .plugins-empty {
  color: #94a3b8;
}

/* Radio / Subtag / Form Light Theme */
.theme-light .radio-label {
  background: rgba(0, 0, 0, 0.03);
  border-color: rgba(0, 0, 0, 0.12);
}

.theme-light .radio-label:hover {
  background: rgba(0, 0, 0, 0.06);
  border-color: rgba(0, 0, 0, 0.18);
}

.theme-light .radio-label span {
  color: #3d3d3d;
}

.theme-light .subtag-item {
  background: rgba(0, 0, 0, 0.03);
}

.theme-light .subtag-edit-name {
  background: #fff;
  border-color: rgba(0, 0, 0, 0.15);
  color: #1a1a1a;
}

.theme-light .subtag-edit-name:focus {
  border-color: #5b5ed6;
}

.theme-light .subtag-action-btn {
  border-color: rgba(0, 0, 0, 0.12);
  color: #555;
}

.theme-light .subtag-action-btn:hover {
  background: rgba(0, 0, 0, 0.05);
  color: #1a1a1a;
}

.theme-light .subtag-action-btn.edit:hover {
  border-color: #5b5ed6;
  color: #5b5ed6;
}

.theme-light .subtag-action-btn.delete:hover {
  border-color: #dc2626;
  color: #dc2626;
}

.theme-light .subtag-action-btn.done {
  background: rgba(22, 163, 74, 0.1);
  border-color: rgba(22, 163, 74, 0.25);
  color: #16a34a;
}

.theme-light .subtag-action-btn.done:hover {
  background: rgba(22, 163, 74, 0.18);
}

.theme-light .subtag-action-btn.reset {
  background: rgba(234, 179, 8, 0.1);
  border-color: rgba(234, 179, 8, 0.25);
  color: #ca8a04;
}

.theme-light .subtag-action-btn.reset:hover {
  background: rgba(234, 179, 8, 0.18);
}

.theme-light .subtag-action-btn.restore {
  background: rgba(37, 99, 235, 0.08);
  border-color: rgba(37, 99, 235, 0.25);
  color: #2563eb;
}

.theme-light .subtag-action-btn.restore:hover {
  background: rgba(37, 99, 235, 0.15);
}

.theme-light .subtag-modified {
  color: #ca8a04;
}

.theme-light .hidden-subtags {
  border-top-color: rgba(0, 0, 0, 0.08);
}

.theme-light .hidden-subtags label {
  color: #555;
}

.theme-light .color-option.selected {
  border-color: #0f172a;
  box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.15);
}

.theme-light .color-custom-input {
  border-color: rgba(0, 0, 0, 0.2);
  color: rgba(0, 0, 0, 0.4);
}
.theme-light .color-custom-input:hover {
  border-color: rgba(0, 0, 0, 0.4);
  color: rgba(0, 0, 0, 0.6);
}

.theme-light .add-subtag-form input[type="text"] {
  background: rgba(255, 255, 255, 0.8);
  border-color: rgba(0, 0, 0, 0.15);
  color: #1a1a1a;
}

.theme-light .add-subtag-form input[type="text"]:focus {
  border-color: #5b5ed6;
  background: #fff;
}

.theme-light .add-subtag-form input[type="text"]::placeholder {
  color: #999;
}

.theme-light .btn-add-subtag {
  background: rgba(22, 163, 74, 0.1);
  border-color: rgba(22, 163, 74, 0.25);
  color: #16a34a;
}

.theme-light .btn-add-subtag:hover:not(:disabled) {
  background: rgba(22, 163, 74, 0.18);
}

.theme-light .subtag-edit-input {
  background: #fff;
  border-color: rgba(0, 0, 0, 0.15);
  color: #1a1a1a;
}

.theme-light .subtag-edit-input:focus {
  border-color: #5b5ed6;
}

/* Form Actions Light Theme */
.theme-light .form-actions {
  background: #fffdf9;
  border-top-color: rgba(0, 0, 0, 0.08);
  border-radius: 0 0 16px 16px;
}

/* =====================================================
   App Icon / Data URI Support (v0.8.0)
   ===================================================== */

/* タブのアイコン画像 (data URI) */
.tab-icon-img {
  width: 16px;
  height: 16px;
  border-radius: 3px;
  object-fit: contain;
  vertical-align: middle;
}

/* 設定モーダル: アプリタブリストのアイコン画像 */
.app-tab-icon-img {
  width: 20px;
  height: 20px;
  border-radius: 3px;
  object-fit: contain;
}

/* インストール済みアプリピッカー (設定モーダル) */
.app-picker {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.app-picker-search {
  padding: 8px 12px;
  border-radius: 8px;
  border: 1px solid rgba(255, 255, 255, 0.12);
  background: rgba(255, 255, 255, 0.06);
  color: #e4e4e7;
  font-size: 0.85rem;
}

.app-picker-search:focus {
  outline: none;
  border-color: rgba(99, 102, 241, 0.5);
}

.theme-light .app-picker-search {
  background: rgba(0, 0, 0, 0.04);
  border-color: rgba(0, 0, 0, 0.12);
  color: #0f172a;
}

.theme-light .app-picker-search:focus {
  border-color: #6366f1;
}

.app-picker-list {
  max-height: 240px;
  overflow-y: auto;
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 8px;
  background: rgba(0, 0, 0, 0.15);
}

.theme-light .app-picker-list {
  border-color: rgba(0, 0, 0, 0.08);
  background: rgba(0, 0, 0, 0.02);
}

.app-picker-item {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 6px 12px;
  border: none;
  background: transparent;
  color: rgba(255, 255, 255, 0.8);
  cursor: pointer;
  font-size: 0.82rem;
  text-align: left;
  transition: background 0.12s;
}

.app-picker-item:hover:not(.disabled) {
  background: rgba(255, 255, 255, 0.08);
}

.app-picker-item.disabled {
  opacity: 0.4;
  cursor: default;
}

.theme-light .app-picker-item {
  color: rgba(0, 0, 0, 0.75);
}

.theme-light .app-picker-item:hover:not(.disabled) {
  background: rgba(0, 0, 0, 0.05);
}

.app-picker-icon-img {
  width: 20px;
  height: 20px;
  border-radius: 3px;
  object-fit: contain;
  flex-shrink: 0;
}

.app-picker-icon-text {
  width: 20px;
  text-align: center;
  font-size: 14px;
  flex-shrink: 0;
}

.app-picker-name {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.app-picker-badge {
  font-size: 0.7rem;
  color: rgba(255, 255, 255, 0.35);
  padding: 1px 5px;
  border-radius: 4px;
  background: rgba(255, 255, 255, 0.06);
}

.theme-light .app-picker-badge {
  color: rgba(0, 0, 0, 0.35);
  background: rgba(0, 0, 0, 0.06);
}

.app-picker-loading,
.app-picker-empty {
  padding: 16px;
  text-align: center;
  color: rgba(255, 255, 255, 0.4);
  font-size: 0.82rem;
}

.theme-light .app-picker-loading,
.theme-light .app-picker-empty {
  color: rgba(0, 0, 0, 0.4);
}

/* ポップオーバーのアプリリスト & 検索 */
.popover-app-search {
  width: calc(100% - 20px);
  margin: 4px 10px;
  padding: 6px 8px;
  border-radius: 6px;
  border: 1px solid rgba(255, 255, 255, 0.12);
  background: rgba(255, 255, 255, 0.06);
  color: #e4e4e7;
  font-size: 12px;
  box-sizing: border-box;
}

.popover-app-search:focus {
  outline: none;
  border-color: rgba(99, 102, 241, 0.5);
}

.theme-light .popover-app-search {
  background: rgba(0, 0, 0, 0.04);
  border-color: rgba(0, 0, 0, 0.12);
  color: #0f172a;
}

.theme-light .popover-app-search:focus {
  border-color: #6366f1;
}

.popover-app-list {
  max-height: 200px;
  overflow-y: auto;
}

.popover-app-loading,
.popover-app-hint {
  padding: 12px 10px;
  text-align: center;
  color: rgba(255, 255, 255, 0.4);
  font-size: 12px;
}

.theme-light .popover-app-loading,
.theme-light .popover-app-hint {
  color: rgba(0, 0, 0, 0.4);
}

.popover-icon-img {
  width: 16px;
  height: 16px;
  border-radius: 2px;
  object-fit: contain;
  flex-shrink: 0;
}

.popover-item-disabled {
  opacity: 0.4;
  cursor: default !important;
}

.popover-item-badge {
  margin-left: auto;
  font-size: 10px;
  color: rgba(255, 255, 255, 0.35);
  padding: 1px 4px;
  border-radius: 3px;
  background: rgba(255, 255, 255, 0.06);
}

.theme-light .popover-item-badge {
  color: rgba(0, 0, 0, 0.35);
  background: rgba(0, 0, 0, 0.06);
}

/* ============================================
   非表示カラム復元バー
   ============================================ */
.hidden-columns-bar {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  background: rgba(255, 255, 255, 0.04);
  border: 1px dashed rgba(255, 255, 255, 0.12);
  border-radius: 8px;
  flex-shrink: 0;
  align-self: flex-start;
  flex-direction: column;
  min-width: 100px;
}

.hidden-columns-label {
  font-size: 11px;
  color: rgba(255, 255, 255, 0.4);
  flex-shrink: 0;
}

.hidden-column-chip {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px 12px;
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 6px;
  background: rgba(255, 255, 255, 0.05);
  color: rgba(255, 255, 255, 0.6);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.15s;
  width: 100%;
  justify-content: space-between;
}

.hidden-column-chip:hover {
  background: rgba(255, 255, 255, 0.12);
  color: rgba(255, 255, 255, 0.9);
  border-color: rgba(255, 255, 255, 0.4);
}

.hidden-column-count {
  font-size: 10px;
  opacity: 0.6;
}

/* カラム非表示ボタン */
.column-hide-btn {
  background: none;
  border: none;
  color: rgba(255, 255, 255, 0.25);
  cursor: pointer;
  padding: 2px;
  display: flex;
  align-items: center;
  transition: color 0.15s;
  opacity: 0;
}

.column-header:hover .column-hide-btn {
  opacity: 1;
}

.column-hide-btn:hover {
  color: rgba(255, 255, 255, 0.6);
}

.theme-light .hidden-columns-bar {
  background: rgba(0, 0, 0, 0.04);
  border-color: rgba(0, 0, 0, 0.15);
}

.theme-light .hidden-columns-label {
  color: #555;
}

.theme-light .hidden-column-chip {
  border-color: rgba(0, 0, 0, 0.18);
  background: rgba(0, 0, 0, 0.05);
  color: #3d3d3d;
}

.theme-light .hidden-column-chip:hover {
  background: rgba(0, 0, 0, 0.1);
  color: #1a1a1a;
  border-color: rgba(0, 0, 0, 0.3);
}

.theme-light .column-hide-btn {
  color: rgba(0, 0, 0, 0.3);
}

.theme-light .column-hide-btn:hover {
  color: rgba(0, 0, 0, 0.6);
}

/* ============================================
   カラム追加ボタン
   ============================================ */
.add-column-button {
  min-width: 320px;
  max-width: 320px;
  min-height: 200px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: 2px dashed rgba(255, 255, 255, 0.12);
  border-radius: 12px;
  color: rgba(255, 255, 255, 0.3);
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  flex-shrink: 0;
}

.add-column-button:hover {
  border-color: rgba(167, 139, 250, 0.4);
  color: #a78bfa;
  background: rgba(167, 139, 250, 0.05);
}

/* ============================================
   カラムヘッダー拡張 (リネーム・削除)
   ============================================ */
/* カラムドラッグハンドル */
.column-drag-handle {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 18px;
  height: 24px;
  cursor: grab;
  flex-shrink: 0;
  opacity: 0;
  transition: opacity 0.15s ease;
  margin-right: 4px;
}

.column-header:hover .column-drag-handle {
  opacity: 1;
}

.column-drag-handle:active {
  cursor: grabbing;
}

.column-dragging {
  opacity: 0.5;
}

/* カラムドラッグオーバーレイ */
.column-drag-overlay {
  background: rgba(255, 255, 255, 0.08);
  border: 2px solid rgba(99, 102, 241, 0.5);
  border-radius: 12px;
  min-width: 320px;
  max-width: 320px;
  padding: 16px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
}

.column-drag-overlay-title {
  font-size: 14px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: #a1a1aa;
}

.column-title-group {
  display: flex;
  align-items: center;
  gap: 4px;
  min-width: 0;
}

.column-edit-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  background: transparent;
  border: none;
  border-radius: 4px;
  color: rgba(255, 255, 255, 0.2);
  cursor: pointer;
  transition: all 0.15s ease;
  flex-shrink: 0;
  opacity: 0;
}

.column-header:hover .column-edit-btn {
  opacity: 1;
}

.column-edit-btn:hover {
  background: rgba(255, 255, 255, 0.1);
  color: rgba(255, 255, 255, 0.6);
}

.column-header-right {
  display: flex;
  align-items: center;
  gap: 8px;
}

.column-title-input {
  font-size: 14px;
  font-weight: 600;
  text-transform: none;
  letter-spacing: 0.5px;
  color: #e4e4e7;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(99, 102, 241, 0.5);
  border-radius: 6px;
  padding: 2px 8px;
  outline: none;
  width: 100%;
  max-width: 180px;
}

.column-title-input:focus {
  border-color: #6366f1;
  box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.2);
}

.column-delete-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 22px;
  height: 22px;
  background: transparent;
  border: none;
  border-radius: 6px;
  color: rgba(255, 255, 255, 0.25);
  font-size: 16px;
  cursor: pointer;
  transition: all 0.15s ease;
  line-height: 1;
}

.column-delete-btn:hover {
  background: rgba(239, 68, 68, 0.15);
  color: #ef4444;
}

/* カラム削除確認UI */
.column-delete-confirm {
  padding: 10px 14px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(239, 68, 68, 0.05);
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.column-delete-confirm-text {
  font-size: 12px;
  color: #a1a1aa;
}

.column-delete-confirm-select {
  font-size: 12px;
  padding: 4px 8px;
  border-radius: 6px;
  border: 1px solid rgba(255, 255, 255, 0.15);
  background: rgba(255, 255, 255, 0.08);
  color: #e4e4e7;
  outline: none;
}

.column-delete-confirm-select:focus {
  border-color: rgba(99, 102, 241, 0.5);
}

.column-delete-confirm-actions {
  display: flex;
  gap: 6px;
  justify-content: flex-end;
}

/* カラムカラーピッカー */
.column-color-wrapper {
  position: relative;
}

.column-color-btn {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  border: 2px solid rgba(255, 255, 255, 0.2);
  cursor: pointer;
  transition: all 0.15s ease;
  padding: 0;
}

.column-color-btn:hover {
  border-color: rgba(255, 255, 255, 0.5);
  transform: scale(1.15);
}

.column-color-picker {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 6px;
  background: #1e1e2e;
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 10px;
  padding: 8px;
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 6px;
  z-index: 100;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
}

.column-color-option {
  width: 22px;
  height: 22px;
  border-radius: 50%;
  border: 2px solid transparent;
  cursor: pointer;
  transition: all 0.15s ease;
  padding: 0;
}

.column-color-option:hover {
  transform: scale(1.2);
  border-color: rgba(255, 255, 255, 0.4);
}

.column-color-option.active {
  border-color: #fff;
  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.3);
}

.column-color-custom {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 22px;
  height: 22px;
  border-radius: 50%;
  border: 2px dashed rgba(255, 255, 255, 0.3);
  cursor: pointer;
  position: relative;
  transition: all 0.15s ease;
  color: rgba(255, 255, 255, 0.5);
}

.column-color-custom:hover {
  border-color: rgba(255, 255, 255, 0.6);
  color: rgba(255, 255, 255, 0.8);
  transform: scale(1.2);
}

.column-color-custom input[type="color"] {
  position: absolute;
  width: 100%;
  height: 100%;
  opacity: 0;
  cursor: pointer;
  border: none;
  padding: 0;
}

.btn-sm {
  padding: 4px 10px !important;
  font-size: 11px !important;
}

.btn-danger {
  background: #ef4444 !important;
}

.btn-danger:hover {
  background: #dc2626 !important;
}

/* ============================================
   カラム追加・管理: ライトテーマ
   ============================================ */
.theme-light .add-column-button {
  border-color: rgba(0, 0, 0, 0.15);
  color: #777;
}

.theme-light .add-column-button:hover {
  border-color: #5b5ed6;
  color: #5b5ed6;
  background: rgba(91, 94, 214, 0.05);
}

.theme-light .column-title-input {
  color: #1a1a1a;
  background: #fff;
  border-color: #5b5ed6;
}

.theme-light .column-title-input:focus {
  border-color: #4a4dc8;
  box-shadow: 0 0 0 2px rgba(91, 94, 214, 0.12);
}

.theme-light .column-edit-btn {
  color: rgba(0, 0, 0, 0.2);
}

.theme-light .column-edit-btn:hover {
  background: rgba(0, 0, 0, 0.06);
  color: rgba(0, 0, 0, 0.5);
}

.theme-light .column-delete-btn {
  color: rgba(0, 0, 0, 0.25);
}

.theme-light .column-delete-btn:hover {
  background: rgba(239, 68, 68, 0.1);
  color: #dc2626;
}

.theme-light .column-delete-confirm {
  border-color: rgba(0, 0, 0, 0.1);
  background: rgba(239, 68, 68, 0.03);
}

.theme-light .column-delete-confirm-text {
  color: #555;
}

.theme-light .column-delete-confirm-select {
  background: #fff;
  border-color: rgba(0, 0, 0, 0.15);
  color: #1a1a1a;
}

.theme-light .column-delete-confirm-select:focus {
  border-color: #5b5ed6;
}

.theme-light .column-color-btn {
  border-color: rgba(0, 0, 0, 0.15);
}

.theme-light .column-color-btn:hover {
  border-color: rgba(0, 0, 0, 0.4);
}

.theme-light .column-color-picker {
  background: #fffdf9;
  border-color: rgba(0, 0, 0, 0.1);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
}

.theme-light .column-color-option:hover {
  border-color: rgba(0, 0, 0, 0.3);
}

.theme-light .column-color-option.active {
  border-color: #1e293b;
  box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.15);
}

.theme-light .column-color-custom {
  border-color: rgba(0, 0, 0, 0.2);
  color: rgba(0, 0, 0, 0.4);
}

.theme-light .column-color-custom:hover {
  border-color: rgba(0, 0, 0, 0.5);
  color: rgba(0, 0, 0, 0.7);
}

/* ============================================
   ErrorBoundary / ErrorFallback
   ============================================ */
.error-fallback {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 80vh;
  padding: 24px;
}

.error-fallback-content {
  max-width: 520px;
  text-align: center;
}

.error-fallback-title {
  font-size: 22px;
  font-weight: 700;
  color: #f87171;
  margin-bottom: 12px;
}

.error-fallback-message {
  font-size: 14px;
  color: #a1a1aa;
  margin-bottom: 20px;
  line-height: 1.6;
}

.error-fallback-details {
  text-align: left;
  margin-bottom: 20px;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 8px;
  padding: 12px;
}

.error-fallback-details summary {
  cursor: pointer;
  font-size: 12px;
  color: #71717a;
  margin-bottom: 8px;
}

.error-fallback-stack {
  font-size: 11px;
  color: #a1a1aa;
  white-space: pre-wrap;
  word-break: break-all;
  max-height: 200px;
  overflow-y: auto;
  line-height: 1.5;
}

.error-fallback-actions {
  display: flex;
  gap: 12px;
  justify-content: center;
}

/* ============================================
   ライトモード追加オーバーライド
   コンテキストメニュー、タスク要素、タイマー、ステータスマーカー
   ============================================ */

/* コンテキストメニュー (CRITICAL) */
.theme-light .task-context-menu {
  background: #fffdf9;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
}

.theme-light .card-context-menu {
  background: #fffdf9;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
}

.theme-light .context-menu-action {
  color: #1a1a1a;
}

.theme-light .context-menu-action:hover {
  background: rgba(91, 94, 214, 0.08);
}

.theme-light .context-menu-action.danger:hover {
  background: rgba(220, 38, 38, 0.08);
  color: #dc2626;
}

.theme-light .context-action-icon {
  color: #777;
}

.theme-light .context-menu-divider {
  background: rgba(0, 0, 0, 0.06);
}

.theme-light .context-menu-header {
  color: #5b5ed6;
}

.theme-light .context-menu-section {
  border-color: rgba(0, 0, 0, 0.06);
}

/* タイマーメニュー (CRITICAL) */
.theme-light .timer-menu {
  border-bottom-color: rgba(0, 0, 0, 0.06);
}

.theme-light .timer-menu-header {
  color: #3d3d3d;
}

.theme-light .timer-elapsed {
  color: #1a8a3e;
}

.theme-light .timer-status {
  color: #3d3d3d;
}

.theme-light .timer-action-btn {
  background: rgba(0, 0, 0, 0.03);
  border-color: rgba(0, 0, 0, 0.08);
  color: #3d3d3d;
}

.theme-light .timer-action-btn:hover {
  background: rgba(0, 0, 0, 0.06);
  border-color: rgba(0, 0, 0, 0.12);
}

/* タスクチェックボックス (CRITICAL) */
.theme-light .task-checkbox {
  border-color: rgba(0, 0, 0, 0.15);
}

.theme-light .task-checkbox.checked {
  background: rgba(34, 197, 94, 0.15);
  border-color: #22c55e;
}

/* タスクテキスト (CRITICAL) */
.theme-light .task-text {
  color: #3d3d3d;
}

.theme-light .task-item.completed .task-text {
  color: #999;
}

/* タスクアイテムホバー (HIGH) */
.theme-light .task-item:hover {
  background: rgba(0, 0, 0, 0.03);
}

/* カードステータスマーカー (HIGH) */
.theme-light .card-status-marker {
  border-color: rgba(0, 0, 0, 0.15);
}

.theme-light .card-status-marker:hover {
  border-color: rgba(0, 0, 0, 0.25);
  background: rgba(0, 0, 0, 0.03);
}

/* チェックボックスサブメニュー */
.theme-light .checkbox-menu-group {
  border-color: #e2e8f0;
}

.theme-light .checkbox-option {
  color: #1e293b;
}

.theme-light .checkbox-option:hover {
  background: rgba(99, 102, 241, 0.08);
}

.theme-light .checkbox-option-label {
  color: #334155;
}

.theme-light .checkbox-option-marker {
  border-color: #cbd5e1;
}

/* =====================================================
   マルチアプリ Grid配置モーダル
   ===================================================== */
.multi-grid-modal {
  width: 520px;
  max-width: 95vw;
  max-height: 85vh;
  overflow-y: auto;
}

.multi-grid-content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: 0 4px 4px;
}

/* クイック配置セクション */
.mg-quick-section {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.mg-quick-controls {
  display: flex;
  gap: 16px;
  align-items: flex-end;
  flex-wrap: wrap;
}
.mg-sub-grid-controls {
  padding-top: 4px;
  border-top: 1px solid rgba(255,255,255,0.06);
}
.mg-sub-grid-controls .mg-size-btn {
  min-width: 32px;
  font-size: 11px;
}
.mg-header-actions {
  display: flex;
  align-items: center;
  gap: 8px;
}
.mg-help-btn {
  width: 22px;
  height: 22px;
  border-radius: 50%;
  border: 1.5px solid rgba(255,255,255,0.2);
  background: transparent;
  color: rgba(255,255,255,0.5);
  font-size: 12px;
  font-weight: 700;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s;
}
.mg-help-btn:hover { border-color: rgba(255,255,255,0.4); color: rgba(255,255,255,0.8); }
.mg-help-btn.active { background: rgba(255,255,255,0.1); border-color: rgba(255,255,255,0.4); color: #fff; }
.mg-help-panel {
  background: rgba(255,255,255,0.04);
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 8px;
  padding: 12px 16px;
  margin-bottom: 8px;
  font-size: 12px;
  line-height: 1.6;
  color: rgba(255,255,255,0.7);
}
.mg-help-panel h4 { color: rgba(255,255,255,0.9); margin: 0 0 4px; font-size: 12px; }
.mg-help-panel h4:not(:first-child) { margin-top: 10px; }
.mg-help-panel p { margin: 0 0 4px; }
.mg-help-panel ul { margin: 0 0 4px; padding-left: 18px; }
.mg-help-panel li { margin-bottom: 2px; }
.mg-help-note {
  margin-top: 8px;
  padding: 6px 10px;
  background: rgba(251,191,36,0.08);
  border: 1px solid rgba(251,191,36,0.2);
  border-radius: 4px;
  color: rgba(251,191,36,0.9);
  font-size: 11px;
}

.mg-control-group {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.mg-control-group label {
  font-size: 11px;
  color: #94a3b8;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.mg-dir-btn {
  padding: 4px 8px !important;
}

.mg-quick-main {
  display: flex;
  gap: 16px;
  align-items: center;
}

.mg-quick-apps {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.mg-quick-app {
  display: flex;
  align-items: center;
  gap: 8px;
}

.mg-app-label {
  font-size: 13px;
  font-weight: 700;
  width: 18px;
  text-align: center;
  flex-shrink: 0;
}

.mg-app-select {
  flex: 1;
  padding: 6px 10px;
  background: rgba(255, 255, 255, 0.06);
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 6px;
  color: #e2e8f0;
  font-size: 13px;
  cursor: pointer;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6'%3E%3Cpath d='M0 0l5 6 5-6z' fill='%2394a3b8'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 8px center;
  padding-right: 24px;
}

.mg-app-select:focus {
  border-color: rgba(139, 92, 246, 0.5);
  outline: none;
}

.mg-quick-preview {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 8px;
  background: rgba(255, 255, 255, 0.03);
  border-radius: 8px;
  border: 1px solid rgba(255, 255, 255, 0.06);
}

.mg-preview-svg {
  display: block;
}

.mg-quick-arrange {
  width: 100%;
}

.mg-result-bar {
  font-size: 12px;
  color: #94a3b8;
  text-align: center;
  padding: 4px 0;
}

/* カスタム配置セクション (折りたたみ) */
.mg-custom-section {
  border-top: 1px solid rgba(255, 255, 255, 0.06);
  padding-top: 8px;
}

.mg-custom-toggle {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 4px;
  background: none;
  border: none;
  color: #64748b;
  font-size: 12px;
  cursor: pointer;
  transition: color 0.15s;
  width: 100%;
  text-align: left;
}

.mg-custom-toggle:hover {
  color: #94a3b8;
}

.mg-custom-body {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding-top: 8px;
}

/* お気に入りセクション */
.mg-favorites-section h3 {
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: #94a3b8;
  margin: 0 0 8px;
}

.mg-favorites-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.mg-favorite-item {
  display: flex;
  align-items: center;
  gap: 4px;
}

.mg-favorite-load {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 10px;
  background: rgba(139, 92, 246, 0.08);
  border: 1px solid rgba(139, 92, 246, 0.2);
  border-radius: 6px;
  color: #c4b5fd;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.mg-favorite-load:hover {
  background: rgba(139, 92, 246, 0.15);
  border-color: rgba(139, 92, 246, 0.4);
}

.mg-favorite-name {
  font-weight: 500;
}

.mg-favorite-info {
  font-size: 11px;
  color: #8b5cf6;
  opacity: 0.7;
}

.mg-favorite-edit,
.mg-favorite-delete {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(255, 255, 255, 0.04);
  color: #94a3b8;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.mg-favorite-edit:hover {
  background: rgba(139, 92, 246, 0.15);
  border-color: rgba(139, 92, 246, 0.4);
  color: #a78bfa;
}

.mg-favorite-delete:hover {
  background: rgba(239, 68, 68, 0.15);
  border-color: rgba(239, 68, 68, 0.4);
  color: #ef4444;
}

/* グリッドサイズ選択 */
.mg-size-section {
  display: flex;
  gap: 16px;
  align-items: flex-end;
  flex-wrap: wrap;
}

.mg-size-group {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.mg-size-group label {
  font-size: 11px;
  color: #94a3b8;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.mg-size-buttons {
  display: flex;
  gap: 2px;
}

.mg-size-btn {
  width: 30px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(255, 255, 255, 0.04);
  color: #94a3b8;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.mg-size-btn:hover {
  background: rgba(139, 92, 246, 0.12);
  border-color: rgba(139, 92, 246, 0.3);
}

.mg-size-btn.active {
  background: rgba(139, 92, 246, 0.2);
  border-color: rgba(139, 92, 246, 0.5);
  color: #a78bfa;
  font-weight: 600;
}

.mg-display-select {
  padding: 4px 8px;
  background: rgba(255, 255, 255, 0.06);
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 6px;
  color: #e2e8f0;
  font-size: 12px;
  cursor: pointer;
}

/* グリッドエディタ */
.mg-grid-editor {
  display: grid;
  gap: 6px;
  min-height: 180px;
}

.mg-cell {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
  border: 2px dashed rgba(255, 255, 255, 0.12);
  background: rgba(255, 255, 255, 0.02);
  cursor: pointer;
  transition: all 0.15s ease;
  min-height: 60px;
}

.mg-cell.empty:hover {
  border-color: rgba(139, 92, 246, 0.4);
  background: rgba(139, 92, 246, 0.06);
}

.mg-cell.assigned {
  border-style: solid;
}

.mg-cell.selecting {
  border-color: rgba(139, 92, 246, 0.6) !important;
  box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);
}

.mg-cell-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  position: relative;
  width: 100%;
  padding: 4px;
}

.mg-cell-icon {
  width: 24px;
  height: 24px;
  object-fit: contain;
}

.mg-cell-emoji {
  font-size: 20px;
  line-height: 1;
}

.mg-cell-name {
  font-size: 11px;
  font-weight: 600;
  text-align: center;
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.mg-cell-clear {
  position: absolute;
  top: 2px;
  right: 2px;
  width: 18px;
  height: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  border: none;
  background: rgba(0, 0, 0, 0.4);
  color: #fff;
  font-size: 12px;
  cursor: pointer;
  opacity: 0;
  transition: opacity 0.15s;
}

.mg-cell:hover .mg-cell-clear {
  opacity: 1;
}

.mg-cell-placeholder {
  font-size: 20px;
  color: rgba(255, 255, 255, 0.15);
  font-weight: 300;
}

/* アプリ選択ポップオーバー */
.mg-app-popover {
  position: absolute;
  top: calc(100% + 4px);
  left: 50%;
  transform: translateX(-50%);
  z-index: 100;
  background: #1e1b2e;
  border: 1px solid rgba(139, 92, 246, 0.3);
  border-radius: 8px;
  padding: 4px;
  min-width: 140px;
  max-height: 200px;
  overflow-y: auto;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
  display: flex;
  flex-direction: column;
  gap: 1px;
}

.mg-app-option {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  border: none;
  border-radius: 6px;
  background: transparent;
  color: #e2e8f0;
  font-size: 12px;
  cursor: pointer;
  transition: background 0.1s;
  white-space: nowrap;
}

.mg-app-option:hover {
  background: rgba(139, 92, 246, 0.15);
}

.mg-app-option-icon {
  width: 18px;
  height: 18px;
  object-fit: contain;
}

.mg-app-option-emoji {
  font-size: 14px;
  width: 18px;
  text-align: center;
}

/* アクション */
.mg-actions {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding-top: 8px;
  border-top: 1px solid rgba(255, 255, 255, 0.06);
}

.mg-actions-left {
  display: flex;
  align-items: center;
  gap: 8px;
}

.mg-actions-right {
  display: flex;
  align-items: center;
  gap: 8px;
}

.mg-save-btn {
  padding: 6px 12px;
  background: rgba(255, 255, 255, 0.06);
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 6px;
  color: #94a3b8;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.mg-save-btn:hover {
  background: rgba(255, 255, 255, 0.1);
  color: #e2e8f0;
}

.mg-save-input-group {
  display: flex;
  align-items: center;
  gap: 4px;
}

.mg-save-input {
  width: 120px;
  padding: 5px 8px;
  background: rgba(255, 255, 255, 0.06);
  border: 1px solid rgba(139, 92, 246, 0.3);
  border-radius: 6px;
  color: #e2e8f0;
  font-size: 12px;
  outline: none;
}

.mg-save-input:focus {
  border-color: rgba(139, 92, 246, 0.6);
}

.mg-save-confirm {
  padding: 5px 10px;
  background: rgba(139, 92, 246, 0.2);
  border: 1px solid rgba(139, 92, 246, 0.4);
  border-radius: 6px;
  color: #a78bfa;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.mg-save-confirm:hover:not(:disabled) {
  background: rgba(139, 92, 246, 0.3);
}

.mg-save-confirm:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.mg-save-cancel {
  width: 26px;
  height: 26px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  border-radius: 6px;
  background: rgba(255, 255, 255, 0.04);
  color: #94a3b8;
  font-size: 14px;
  cursor: pointer;
}

.mg-save-cancel:hover {
  background: rgba(239, 68, 68, 0.15);
  color: #ef4444;
}

.mg-result-msg {
  font-size: 12px;
  color: #94a3b8;
}

.mg-arrange-btn {
  padding: 8px 20px;
  background: rgba(139, 92, 246, 0.2);
  border: 1px solid rgba(139, 92, 246, 0.4);
  border-radius: 8px;
  color: #a78bfa;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s ease;
}

.mg-arrange-btn:hover:not(:disabled) {
  background: rgba(139, 92, 246, 0.3);
  border-color: rgba(139, 92, 246, 0.6);
}

.mg-arrange-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* ライトテーマ */
/* ライトテーマ: クイック配置 */
.theme-light .mg-control-group label {
  color: #64748b;
}

.theme-light .mg-app-label {
  /* color は inline style で設定 */
}

.theme-light .mg-app-select {
  background: #fff;
  border-color: #e2e8f0;
  color: #334155;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6'%3E%3Cpath d='M0 0l5 6 5-6z' fill='%2364748b'/%3E%3C/svg%3E");
}

.theme-light .mg-quick-preview {
  background: rgba(0, 0, 0, 0.02);
  border-color: #e2e8f0;
}

.theme-light .mg-result-bar {
  color: #64748b;
}

.theme-light .mg-custom-section {
  border-top-color: #e2e8f0;
}

.theme-light .mg-custom-toggle {
  color: #94a3b8;
}

.theme-light .mg-custom-toggle:hover {
  color: #64748b;
}

.theme-light .mg-favorites-section h3 {
  color: #64748b;
}

.theme-light .mg-favorite-load {
  background: rgba(99, 102, 241, 0.06);
  border-color: rgba(99, 102, 241, 0.2);
  color: #4f46e5;
}

.theme-light .mg-favorite-load:hover {
  background: rgba(99, 102, 241, 0.12);
}

.theme-light .mg-favorite-edit,
.theme-light .mg-favorite-delete {
  border-color: #e2e8f0;
  background: #f8fafc;
  color: #64748b;
}

.theme-light .mg-size-btn {
  border-color: #e2e8f0;
  background: #f8fafc;
  color: #64748b;
}

.theme-light .mg-size-btn.active {
  background: rgba(99, 102, 241, 0.1);
  border-color: rgba(99, 102, 241, 0.4);
  color: #4f46e5;
}

.theme-light .mg-display-select {
  background: #f8fafc;
  border-color: #e2e8f0;
  color: #334155;
}

.theme-light .mg-cell {
  border-color: #e2e8f0;
  background: #f8fafc;
}

.theme-light .mg-cell.empty:hover {
  border-color: rgba(99, 102, 241, 0.4);
  background: rgba(99, 102, 241, 0.04);
}

.theme-light .mg-cell-clear {
  background: rgba(0, 0, 0, 0.2);
}

.theme-light .mg-cell-placeholder {
  color: #cbd5e1;
}

.theme-light .mg-app-popover {
  background: #fff;
  border-color: #e2e8f0;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
}

.theme-light .mg-app-option {
  color: #334155;
}

.theme-light .mg-app-option:hover {
  background: rgba(99, 102, 241, 0.08);
}

.theme-light .mg-actions {
  border-top-color: #e2e8f0;
}

.theme-light .mg-save-btn {
  background: #f8fafc;
  border-color: #e2e8f0;
  color: #64748b;
}

.theme-light .mg-save-input {
  background: #fff;
  border-color: rgba(99, 102, 241, 0.3);
  color: #334155;
}

.theme-light .mg-result-msg {
  color: #64748b;
}

.theme-light .mg-arrange-btn {
  background: rgba(99, 102, 241, 0.1);
  border-color: rgba(99, 102, 241, 0.3);
  color: #4f46e5;
}

.theme-light .mg-arrange-btn:hover:not(:disabled) {
  background: rgba(99, 102, 241, 0.18);
}

/* ============================================
   ヘルプモーダル
   ============================================ */
.help-modal {
  max-width: 700px;
  width: 90vw;
  display: flex;
  flex-direction: column;
  max-height: 80vh;
}

.help-tabs {
  display: flex;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  padding: 0 16px;
  gap: 4px;
}

.help-tab {
  padding: 8px 16px;
  background: transparent;
  border: none;
  border-bottom: 2px solid transparent;
  color: rgba(255, 255, 255, 0.5);
  font-size: 13px;
  cursor: pointer;
  transition: all 0.15s;
}

.help-tab:hover {
  color: rgba(255, 255, 255, 0.8);
}

.help-tab.active {
  color: #a78bfa;
  border-bottom-color: #a78bfa;
}

.help-content {
  flex: 1;
  overflow-y: auto;
  padding: 16px 20px;
  min-height: 0;
}

.help-tab-content {
  font-size: 13px;
  line-height: 1.7;
  color: rgba(255, 255, 255, 0.75);
}

.help-intro h3 {
  font-size: 18px;
  color: #fff;
  margin: 0 0 8px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.help-version {
  font-size: 11px;
  font-weight: 500;
  background: rgba(167, 139, 250, 0.15);
  color: #a78bfa;
  padding: 2px 8px;
  border-radius: 10px;
}

.help-intro p {
  margin: 0 0 16px;
}

.help-feature-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

.help-feature-card {
  background: rgba(255, 255, 255, 0.04);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 8px;
  padding: 12px;
  transition: background 0.15s;
}

.help-feature-card:hover {
  background: rgba(255, 255, 255, 0.07);
}

.help-feature-icon {
  font-size: 20px;
  margin-bottom: 6px;
}

.help-feature-title {
  font-size: 13px;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.9);
  margin-bottom: 4px;
}

.help-feature-desc {
  font-size: 11px;
  color: rgba(255, 255, 255, 0.55);
  line-height: 1.5;
}

.help-feature-detail {
  margin-bottom: 16px;
  padding-bottom: 16px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
}

.help-feature-detail:last-child {
  border-bottom: none;
  margin-bottom: 0;
  padding-bottom: 0;
}

.help-feature-detail h4,
.help-subsection h4 {
  font-size: 14px;
  color: rgba(255, 255, 255, 0.9);
  margin: 0 0 6px;
}

.help-feature-detail p,
.help-subsection p {
  margin: 0 0 6px;
}

.help-feature-detail ul,
.help-subsection ul {
  margin: 0 0 6px;
  padding-left: 20px;
}

.help-feature-detail li,
.help-subsection li {
  margin-bottom: 3px;
}

.help-subsection {
  margin-bottom: 16px;
  padding-bottom: 16px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
}

.help-subsection:last-child {
  border-bottom: none;
  margin-bottom: 0;
  padding-bottom: 0;
}

.help-steps {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 8px;
}

.help-step {
  display: flex;
  align-items: center;
  gap: 10px;
}

.help-step-num {
  width: 22px;
  height: 22px;
  border-radius: 50%;
  background: rgba(167, 139, 250, 0.15);
  color: #a78bfa;
  font-size: 11px;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.help-code-inline {
  background: rgba(255, 255, 255, 0.08);
  padding: 1px 5px;
  border-radius: 3px;
  font-family: 'SF Mono', 'Fira Code', monospace;
  font-size: 12px;
}

.help-code-block {
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 6px;
  padding: 10px 14px;
  margin-top: 8px;
  overflow-x: auto;
}

.help-code-block code {
  font-family: 'SF Mono', 'Fira Code', monospace;
  font-size: 12px;
  color: rgba(255, 255, 255, 0.8);
}

.help-shortcuts-grid {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-top: 8px;
}

.help-shortcut-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 4px 0;
}

.help-shortcut-item kbd {
  min-width: 80px;
  padding: 3px 8px;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 4px;
  font-family: 'SF Mono', 'Fira Code', monospace;
  font-size: 11px;
  color: rgba(255, 255, 255, 0.85);
  text-align: center;
}

.help-shortcut-action {
  min-width: 80px;
  padding: 3px 8px;
  background: rgba(167, 139, 250, 0.1);
  border: 1px solid rgba(167, 139, 250, 0.2);
  border-radius: 4px;
  font-size: 11px;
  color: #a78bfa;
  text-align: center;
}

.help-shortcut-item span:last-child {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.65);
}

.help-footer {
  display: flex;
  justify-content: center;
  gap: 16px;
  padding: 12px 16px;
  border-top: 1px solid rgba(255, 255, 255, 0.08);
}

.help-footer-link {
  background: none;
  border: none;
  color: rgba(167, 139, 250, 0.8);
  font-size: 12px;
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 4px;
  transition: all 0.15s;
  text-decoration: none;
}

.help-footer-link:hover {
  color: #a78bfa;
  background: rgba(167, 139, 250, 0.1);
}

/* ============================================
   プラグインガイドバナー
   ============================================ */
.plugin-guide-banner {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 12px 16px;
  margin-bottom: 12px;
  background: rgba(167, 139, 250, 0.06);
  border: 1px solid rgba(167, 139, 250, 0.15);
  border-radius: 8px;
}

.plugin-guide-icon {
  font-size: 20px;
  flex-shrink: 0;
  margin-top: 1px;
}

.plugin-guide-text {
  font-size: 13px;
  color: rgba(255, 255, 255, 0.75);
  line-height: 1.5;
}

.plugin-guide-text p {
  margin: 0;
}

.plugin-guide-text .form-hint {
  margin-top: 2px;
}

/* ============================================
   ヘルプモーダル - ライトテーマ
   ============================================ */
.theme-light .help-tab {
  color: #94a3b8;
}

.theme-light .help-tab:hover {
  color: #475569;
}

.theme-light .help-tab.active {
  color: #6d28d9;
  border-bottom-color: #6d28d9;
}

.theme-light .help-tab-content {
  color: #475569;
}

.theme-light .help-intro h3 {
  color: #1e293b;
}

.theme-light .help-version {
  background: rgba(109, 40, 217, 0.1);
  color: #6d28d9;
}

.theme-light .help-feature-card {
  background: #f8fafc;
  border-color: #e2e8f0;
}

.theme-light .help-feature-card:hover {
  background: #f1f5f9;
}

.theme-light .help-feature-title {
  color: #1e293b;
}

.theme-light .help-feature-desc {
  color: #94a3b8;
}

.theme-light .help-feature-detail {
  border-bottom-color: #e2e8f0;
}

.theme-light .help-feature-detail h4,
.theme-light .help-subsection h4 {
  color: #1e293b;
}

.theme-light .help-subsection {
  border-bottom-color: #e2e8f0;
}

.theme-light .help-step-num {
  background: rgba(109, 40, 217, 0.1);
  color: #6d28d9;
}

.theme-light .help-code-inline {
  background: #f1f5f9;
  color: #334155;
}

.theme-light .help-code-block {
  background: #f8fafc;
  border-color: #e2e8f0;
}

.theme-light .help-code-block code {
  color: #334155;
}

.theme-light .help-shortcut-item kbd {
  background: #f8fafc;
  border-color: #e2e8f0;
  color: #334155;
}

.theme-light .help-shortcut-action {
  background: rgba(109, 40, 217, 0.06);
  border-color: rgba(109, 40, 217, 0.15);
  color: #6d28d9;
}

.theme-light .help-shortcut-item span:last-child {
  color: #64748b;
}

.theme-light .help-footer {
  border-top-color: #e2e8f0;
}

.theme-light .help-footer-link {
  color: #6d28d9;
}

.theme-light .help-footer-link:hover {
  background: rgba(109, 40, 217, 0.06);
}

.theme-light .help-tabs {
  border-bottom-color: #e2e8f0;
}

/* プラグインガイドバナー - ライトテーマ */
.theme-light .plugin-guide-banner {
  background: rgba(109, 40, 217, 0.04);
  border-color: rgba(109, 40, 217, 0.12);
}

.theme-light .plugin-guide-text {
  color: #475569;
}

/* mg-help - ライトテーマ */
.theme-light .mg-help-btn {
  border-color: #cbd5e1;
  color: #94a3b8;
}

.theme-light .mg-help-btn:hover {
  border-color: #94a3b8;
  color: #475569;
}

.theme-light .mg-help-btn.active {
  background: #f1f5f9;
  border-color: #94a3b8;
  color: #334155;
}

.theme-light .mg-help-panel {
  background: #f8fafc;
  border-color: #e2e8f0;
  color: #475569;
}

.theme-light .mg-help-panel h4 {
  color: #1e293b;
}

.theme-light .mg-help-note {
  background: rgba(245, 158, 11, 0.06);
  border-color: rgba(245, 158, 11, 0.2);
  color: #b45309;
}

/* === アンインストールボタン === */
.btn-uninstall {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 8px 16px;
  background: transparent;
  border: 1px solid rgba(239, 68, 68, 0.3);
  border-radius: 8px;
  color: #ef4444;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.btn-uninstall:hover {
  background: rgba(239, 68, 68, 0.1);
  border-color: rgba(239, 68, 68, 0.5);
}

.theme-light .btn-uninstall {
  color: #dc2626;
  border-color: rgba(220, 38, 38, 0.25);
}

.theme-light .btn-uninstall:hover {
  background: rgba(220, 38, 38, 0.06);
  border-color: rgba(220, 38, 38, 0.4);
}

/* === ウィンドウ閉じる確認パネル === */
.card-close-confirm {
  padding: 8px 10px;
  border-top: 1px solid rgba(255, 255, 255, 0.08);
  background: rgba(239, 68, 68, 0.05);
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.card-close-confirm-text {
  font-size: 12px;
  color: #d4d4d8;
  margin: 0;
}

.card-close-confirm-check {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  color: #a1a1aa;
  cursor: pointer;
  user-select: none;
}

.card-close-confirm-check input[type="checkbox"] {
  width: 13px;
  height: 13px;
  accent-color: #6366f1;
  cursor: pointer;
}

.card-close-confirm-warning {
  font-size: 11px;
  color: #f87171;
  margin: 0;
}

.card-close-confirm-actions {
  display: flex;
  gap: 6px;
  justify-content: flex-end;
}

.btn-danger-sm {
  padding: 4px 12px;
  font-size: 12px;
  border-radius: 6px;
  border: none;
  background: #ef4444;
  color: #fff;
  cursor: pointer;
  transition: background 0.15s ease;
}

.btn-danger-sm:hover {
  background: #dc2626;
}

.theme-light .card-close-confirm-warning {
  color: #dc2626;
}

.theme-light .card-close-confirm {
  border-color: #e2e8f0;
  background: rgba(239, 68, 68, 0.03);
}

.theme-light .card-close-confirm-text {
  color: #475569;
}

.theme-light .card-close-confirm-check {
  color: #64748b;
}

/* =========================================================
   Grid配置モーダル: カラムフィルタUI
   ========================================================= */

.grid-filter-tabs {
  display: flex;
  gap: 4px;
  margin-bottom: 16px;
  background: rgba(255, 255, 255, 0.04);
  border-radius: 8px;
  padding: 3px;
}

.grid-filter-tab {
  flex: 1;
  padding: 8px 12px;
  font-size: 13px;
  font-weight: 500;
  border: none;
  border-radius: 6px;
  background: transparent;
  color: #a1a1aa;
  cursor: pointer;
  transition: all 0.15s ease;
}

.grid-filter-tab:hover {
  color: #d4d4d8;
  background: rgba(255, 255, 255, 0.04);
}

.grid-filter-tab.active {
  background: rgba(139, 92, 246, 0.15);
  color: #c4b5fd;
}

.grid-column-filter {
  margin-bottom: 16px;
}

.grid-column-filter-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 8px;
}

.grid-column-filter-header h3 {
  margin: 0;
}

.grid-column-filter-actions {
  display: flex;
  gap: 6px;
}

.grid-column-select-btn {
  font-size: 11px;
  padding: 3px 8px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 4px;
  background: transparent;
  color: #a1a1aa;
  cursor: pointer;
  transition: all 0.15s ease;
}

.grid-column-select-btn:hover {
  background: rgba(255, 255, 255, 0.06);
  color: #d4d4d8;
}

.grid-column-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.grid-column-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.grid-column-item:hover {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(255, 255, 255, 0.1);
}

.grid-column-item.selected {
  background: rgba(139, 92, 246, 0.08);
  border-color: rgba(139, 92, 246, 0.3);
}

.grid-column-item.disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.grid-column-item input[type="checkbox"] {
  accent-color: #a78bfa;
  flex-shrink: 0;
}

.grid-column-color {
  width: 12px;
  height: 12px;
  border-radius: 3px;
  flex-shrink: 0;
}

.grid-column-name {
  flex: 1;
  font-size: 13px;
  color: #e4e4e7;
  font-weight: 500;
}

.grid-column-count {
  font-size: 12px;
  color: #71717a;
  min-width: 20px;
  text-align: right;
}

.grid-column-summary {
  margin-top: 10px;
  font-size: 12px;
  color: #a78bfa;
  text-align: center;
  padding: 6px;
  background: rgba(139, 92, 246, 0.06);
  border-radius: 6px;
}

.grid-column-summary-warn {
  color: #71717a;
  background: rgba(255, 255, 255, 0.02);
}

/* ライトテーマ対応 */

.theme-light .grid-filter-tabs {
  background: rgba(0, 0, 0, 0.04);
}

.theme-light .grid-filter-tab {
  color: #71717a;
}

.theme-light .grid-filter-tab:hover {
  color: #3f3f46;
  background: rgba(0, 0, 0, 0.04);
}

.theme-light .grid-filter-tab.active {
  background: rgba(139, 92, 246, 0.1);
  color: #7c3aed;
}

.theme-light .grid-column-select-btn {
  border-color: rgba(0, 0, 0, 0.1);
  color: #71717a;
}

.theme-light .grid-column-select-btn:hover {
  background: rgba(0, 0, 0, 0.04);
  color: #3f3f46;
}

.theme-light .grid-column-item {
  background: rgba(0, 0, 0, 0.02);
  border-color: rgba(0, 0, 0, 0.06);
}

.theme-light .grid-column-item:hover {
  background: rgba(0, 0, 0, 0.04);
  border-color: rgba(0, 0, 0, 0.1);
}

.theme-light .grid-column-item.selected {
  background: rgba(139, 92, 246, 0.06);
  border-color: rgba(139, 92, 246, 0.25);
}

.theme-light .grid-column-name {
  color: #3f3f46;
}

.theme-light .grid-column-count {
  color: #a1a1aa;
}

.theme-light .grid-column-summary {
  color: #7c3aed;
  background: rgba(139, 92, 246, 0.05);
}

.theme-light .grid-column-summary-warn {
  color: #a1a1aa;
  background: rgba(0, 0, 0, 0.02);
}

/* ============================================
   アップデート通知バナー
   ============================================ */
.update-banner {
  position: fixed;
  top: 52px;
  left: 56px;
  right: 0;
  z-index: 90;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 8px 16px;
  background: linear-gradient(135deg, rgba(99, 102, 241, 0.15) 0%, rgba(139, 92, 246, 0.15) 100%);
  border-bottom: 1px solid rgba(139, 92, 246, 0.3);
  backdrop-filter: blur(12px);
  transform: translateY(-100%);
  opacity: 0;
  transition: transform 0.3s ease, opacity 0.3s ease;
  pointer-events: none;
}

.update-banner-visible {
  transform: translateY(0);
  opacity: 1;
  pointer-events: auto;
}

.update-banner-text {
  font-size: 13px;
  color: #c4b5fd;
  font-weight: 500;
}

.update-banner-action {
  background: rgba(139, 92, 246, 0.25);
  border: 1px solid rgba(139, 92, 246, 0.4);
  color: #c4b5fd;
  padding: 4px 12px;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s, border-color 0.2s;
}

.update-banner-action:hover {
  background: rgba(139, 92, 246, 0.4);
  border-color: rgba(139, 92, 246, 0.6);
}

.update-banner-close {
  background: none;
  border: none;
  color: rgba(196, 181, 253, 0.6);
  font-size: 18px;
  cursor: pointer;
  padding: 2px 6px;
  line-height: 1;
  border-radius: 4px;
  transition: color 0.2s, background 0.2s;
}

.update-banner-close:hover {
  color: #c4b5fd;
  background: rgba(139, 92, 246, 0.2);
}

/* ライトテーマ */
.theme-light .update-banner {
  background: linear-gradient(135deg, rgba(99, 102, 241, 0.08) 0%, rgba(139, 92, 246, 0.08) 100%);
  border-bottom: 1px solid rgba(139, 92, 246, 0.2);
}

.theme-light .update-banner-text {
  color: #6d28d9;
}

.theme-light .update-banner-action {
  background: rgba(139, 92, 246, 0.12);
  border-color: rgba(139, 92, 246, 0.3);
  color: #6d28d9;
}

.theme-light .update-banner-action:hover {
  background: rgba(139, 92, 246, 0.2);
  border-color: rgba(139, 92, 246, 0.5);
}

.theme-light .update-banner-close {
  color: rgba(109, 40, 217, 0.4);
}

.theme-light .update-banner-close:hover {
  color: #6d28d9;
  background: rgba(139, 92, 246, 0.1);
}

/* ===== トースト通知 ===== */
.toast-notification {
  position: fixed;
  bottom: 24px;
  left: 50%;
  transform: translateX(-50%);
  padding: 10px 20px;
  border-radius: 8px;
  font-size: 13px;
  z-index: 10001;
  cursor: pointer;
  animation: toast-slide-in 0.25s ease-out;
  max-width: 400px;
  text-align: center;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.toast-info {
  background: rgba(59, 130, 246, 0.9);
  color: #fff;
}

.toast-error {
  background: rgba(239, 68, 68, 0.9);
  color: #fff;
}

@keyframes toast-slide-in {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(12px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}
